{"ast":null,"code":"var _jsxFileName = \"/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Layout from '../../components/Layout';\nimport API from '../../services/API';\nimport mapboxgl, { accessToken } from \"mapbox-gl\";\nimport UserDataService from \"../../services/UserDataService\";\nimport SearchBar from '../../components/SearchBar';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button, Modal, Input } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = 'pk.eyJ1IjoiaGljY3VwLXN0YWZmIiwiYSI6ImNsangxeHVkbzAyNmwzdHJ4cmJiYWZmMm4ifQ.yI4259jlMq2elDiT_uK1kg';\nexport default function Control(access_token, user_data) {\n  const router = useRouter();\n  const {\n    0: newlat,\n    1: setnewlat\n  } = useState(-0.0);\n  const {\n    0: newlgn,\n    1: setnewlgn\n  } = useState(-0.0);\n  const {\n    0: address,\n    1: setaddress\n  } = useState('');\n  const {\n    0: input,\n    1: setInput\n  } = useState('');\n  const {\n    0: resultsearch,\n    1: setresultsearch\n  } = useState([]);\n  const {\n    0: selectedMarker,\n    1: setselectedMarker\n  } = useState('');\n  const {\n    0: parentState,\n    1: setParentState\n  } = useState('Initial Value');\n  const {\n    0: Trails,\n    1: setTrails\n  } = useState([]);\n  const {\n    0: lngLatSelected,\n    1: setlngLatSelected\n  } = useState(false);\n  const {\n    0: markersLoaded,\n    1: setMarkersLoaded\n  } = useState(false);\n  const {\n    0: username,\n    1: setInputValueUsername\n  } = useState('');\n  const {\n    0: email,\n    1: setInputValueEmail\n  } = useState('');\n  const {\n    0: Markers,\n    1: setMarkers\n  } = useState([]);\n  const {\n    0: lng,\n    1: setLng\n  } = useState(2.35);\n  const {\n    0: lat,\n    1: setLat\n  } = useState(48.85);\n  const {\n    0: zoom,\n    1: setZoom\n  } = useState(5);\n  const map = useRef(null);\n  const mapContainer = useRef(null);\n  const {\n    0: isModalOpen,\n    1: setIsModalOpen\n  } = useState(false);\n  const {\n    0: isModalOpenUpdate,\n    1: setIsModalOpenUpdate\n  } = useState(false);\n  const showModaUpdate = () => {\n    setIsModalOpenUpdate(true);\n  };\n  const handleOkUpdate = () => {\n    setIsModalOpenUpdate(false);\n  };\n  const handleCancelUpdate = () => {\n    setIsModalOpenUpdate(false);\n  };\n  const showModal = () => {\n    setIsModalOpen(true);\n  };\n  const handleSubmit = async () => {\n    updateMarker(selectedMarker);\n  };\n  const updateParentState = newState => {\n    setParentState(newState);\n    setaddress(newState);\n    console.log(newState);\n  };\n  async function fetchTrails() {\n    try {\n      const user_data = UserDataService.get();\n      console.log(user_data);\n      const response = await API.fetchTrails(\"POST\", '/api/trail/retrieve', user_data, true);\n      let trails = response.data.trails;\n      return trails;\n    } catch (error) {\n      console.error('Error fetching Trails:', error);\n    }\n  }\n  async function getMarker(selectedMarker) {\n    console.log('getMarker');\n    let trails = await fetchTrails();\n    console.dir(trails);\n    for (var i = 0; i < trails.length; i++) {\n      let tmp = JSON.parse(trails[i].geoJSON);\n      console.log('selectedMArker :');\n      console.dir(selectedMarker);\n      if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0].geometry !== 'undefined' && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') {\n        if (tmp.features[0].geometry.coordinates[0][0] === selectedMarker.lng && tmp.features[0].geometry.coordinates[0][1] === selectedMarker.lat) {\n          return i;\n        }\n      }\n    }\n  }\n  async function fetchCoordinates() {\n    try {\n      const response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?access_token=${mapboxgl.accessToken}`);\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"response : \" + data.features[0].center[0] + \" \" + data.features[0].center[1]);\n        return data.features[0].center;\n        console.log(\"here  : \" + newlgn + \" \" + newlat);\n      } else {\n        console.error('Error fetching coordinates:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n  async function updateMarker(selectedMarker) {\n    let index = await getMarker(selectedMarker);\n    console.dir(index);\n    let data = {};\n    let trails = await fetchTrails(user_data);\n    let tmp = JSON.parse(trails[index].geoJSON);\n    data.id = trails[index].id;\n    data.latitude = newlat;\n    data.longitude = newlgn;\n    console.log(typeof tmp.features[0]);\n    let coord = await fetchCoordinates();\n    console.log(\"fetchCoordinates : \" + coord);\n    setnewlgn(coord[0]);\n    setnewlat(coord[1]);\n    tmp.features[0].geometry.coordinates[0][0] = coord[0];\n    tmp.features[0].geometry.coordinates[0][1] = coord[1];\n    console.log('tmp');\n    console.dir(tmp);\n    data.geoJSON = JSON.stringify(tmp);\n    console.log('here');\n    console.log(data);\n    const user_data = UserDataService.get();\n    const response = await API.CreateMarker('PUT', '/api/trail/update', user_data, data, true);\n    let result = response.data.trails;\n    console.log(result);\n    setIsModalOpenUpdate(false);\n    router.reload();\n  }\n  const handleOk = async () => {\n    try {\n      const user_data = UserDataService.get();\n      let trail = {};\n      trail.name = \"Added by admin in dashboard\";\n      trail.address = \"Added by admin in dashboard\";\n      trail.description = \"Added by admin in dashboard\";\n      trail.pictures = [\"https://google.com\"];\n      let coord = await fetchCoordinates();\n      trail.latitude = coord[1];\n      trail.longitude = coord[0];\n      trail.difficulty = 0;\n      trail.duration = 0;\n      trail.distance = 0;\n      trail.uphill = 0;\n      trail.downhill = 0;\n      trail.tools = [];\n      trail.relatedArticles = [];\n      trail.labels = [];\n      let geojson = {\n        features: [{\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Point',\n            coordinates: [[coord[0], coord[1]]]\n          }\n        }]\n      };\n      trail.geoJSON = JSON.stringify(geojson);\n      const response = await API.CreateMarker('POST', '/api/trail/create', user_data, trail, true);\n      console.log(response);\n      setIsModalOpen(false);\n      router.reload();\n    } catch (error) {\n      console.log(error);\n      setIsModalOpen(false);\n      router.reload();\n    }\n  };\n  const handleCancel = () => {\n    setIsModalOpen(false);\n  };\n  useEffect(() => {\n    const marker = loadMarker();\n    console.log(\"Markers[0] : \" + Markers[0] + \"Markers[1] : \" + Markers[1]);\n    const user_data = UserDataService.get();\n    if (map.current && markersLoaded == true) return;\n    // console.log(\"markers:\" + markers);\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12',\n      center: [Markers[0], Markers[1]],\n      //center: [lng, lat],\n      zoom: zoom\n    });\n    map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n    map.current.addControl(new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      trackUserLocation: true\n    }));\n    async function fetchGeoJSON() {\n      try {\n        let result = [];\n        const user_data2 = UserDataService.get();\n        const response = await API.send('POST', \"/api/trail/retrieve\", user_data2, true);\n        let trails = response.data.trails;\n        console.log(trails);\n        console.log(response);\n        trails.map(item => {\n          let tmp = JSON.parse(item.geoJSON);\n          console.log(tmp);\n          if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') {\n            result.push(tmp.features[0].geometry.coordinates[0]);\n          } else {\n            //result.push(tmp.features.geometry.coordinates);\n          }\n        });\n        console.log(result);\n        setMarkers(result.slice(-1));\n        return result;\n      } catch (error) {\n        console.error('Error fetching GeoJSON:', error);\n      }\n    }\n    async function loadMarker() {\n      let markers = await fetchGeoJSON(user_data);\n      let geojson = {\n        type: 'Feature',\n        features: markers === null || markers === void 0 ? void 0 : markers.map(marker => ({\n          geometry: {\n            type: 'Point',\n            coordinates: {\n              lat: marker[1],\n              lng: marker[0]\n            }\n          }\n        }))\n      };\n      map.current.on('load', () => {\n        var _geojson$features;\n        geojson === null || geojson === void 0 ? void 0 : (_geojson$features = geojson.features) === null || _geojson$features === void 0 ? void 0 : _geojson$features.forEach(marker => {\n          // create a DOM element for the marker\n          const markerIcon = document.createElement('div');\n          markerIcon.className = 'location-marker';\n          markerIcon.style.backgroundImage = 'url(/custom-marker.png)';\n          markerIcon.style.width = '60px';\n          markerIcon.style.height = '90px';\n          new mapboxgl.Marker(markerIcon).setLngLat(marker.geometry.coordinates).addTo(map.current);\n          markerIcon.addEventListener('click', () => {\n            console.dir('marker :' + JSON.stringify(marker.geometry.coordinates));\n            setselectedMarker(marker.geometry.coordinates);\n            setIsModalOpenUpdate(true);\n          });\n        });\n      });\n      setMarkersLoaded(true);\n      return markers.slice(-1);\n    }\n    map.current.on('contextmenu', e => {\n      e.preventDefault();\n      const lngLat = e.lngLat;\n      setlngLatSelected(lngLat);\n      console.log('Right-clicked at:', lngLat);\n      setIsModalOpen(true);\n    });\n    //map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n    //return () => { map.current.remove()};\n  });\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"855806535\",\n      children: \".map-container.jsx-855806535{position:absolute;width:100%;height:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kcmFraS9Eb2N1bWVudHMvRXBpdGVjaC9FSVAvZGFzaGJvYXJkL2FkbWluL3BhZ2VzL2NvbnRyb2wvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd1I0QixBQUcyQyxrQkFDUCxXQUNDLFlBQ2hCIiwiZmlsZSI6Ii9Vc2Vycy9kcmFraS9Eb2N1bWVudHMvRXBpdGVjaC9FSVAvZGFzaGJvYXJkL2FkbWluL3BhZ2VzL2NvbnRyb2wvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgQVBJIGZyb20gJy4uLy4uL3NlcnZpY2VzL0FQSSc7XG5pbXBvcnQgbWFwYm94Z2wsIHsgYWNjZXNzVG9rZW4gfSBmcm9tIFwibWFwYm94LWdsXCI7XG5pbXBvcnQgVXNlckRhdGFTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9Vc2VyRGF0YVNlcnZpY2VcIjtcbmltcG9ydCBTZWFyY2hCYXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9TZWFyY2hCYXInO1xuaW1wb3J0ICdtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wuY3NzJztcbmltcG9ydCB7IEJ1dHRvbiwgTW9kYWwsIElucHV0IH0gZnJvbSAnYW50ZCc7XG5tYXBib3hnbC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWFHbGpZM1Z3TFhOMFlXWm1JaXdpWVNJNkltTnNhbmd4ZUhWa2J6QXlObXd6ZEhKNGNtSmlZV1ptTW00aWZRLnlJNDI1OWpsTXEyZWxEaVRfdUsxa2cnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvbnRyb2wgKGFjY2Vzc190b2tlbiwgdXNlcl9kYXRhKSB7XG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gICAgY29uc3QgW25ld2xhdCwgc2V0bmV3bGF0XSA9IHVzZVN0YXRlKC0wLjApO1xuICAgIGNvbnN0IFtuZXdsZ24sIHNldG5ld2xnbl0gPSAgdXNlU3RhdGUoLTAuMCk7XG4gICAgY29uc3QgW2FkZHJlc3MsIHNldGFkZHJlc3NdID0gIHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbcmVzdWx0c2VhcmNoLCBzZXRyZXN1bHRzZWFyY2hdID0gdXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IFtzZWxlY3RlZE1hcmtlciwgc2V0c2VsZWN0ZWRNYXJrZXJdID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtwYXJlbnRTdGF0ZSwgc2V0UGFyZW50U3RhdGVdID0gdXNlU3RhdGUoJ0luaXRpYWwgVmFsdWUnKTtcbiAgICBjb25zdCBbVHJhaWxzLCBzZXRUcmFpbHNdID0gdXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IFtsbmdMYXRTZWxlY3RlZCwgc2V0bG5nTGF0U2VsZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFttYXJrZXJzTG9hZGVkLCBzZXRNYXJrZXJzTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbdXNlcm5hbWUsIHNldElucHV0VmFsdWVVc2VybmFtZV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW2VtYWlsLCBzZXRJbnB1dFZhbHVlRW1haWxdID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtNYXJrZXJzLCBzZXRNYXJrZXJzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCBbbG5nLCBzZXRMbmddID0gdXNlU3RhdGUoMi4zNSk7XG4gICAgY29uc3QgW2xhdCwgc2V0TGF0XSA9IHVzZVN0YXRlKDQ4Ljg1KTtcbiAgICBjb25zdCBbem9vbSwgc2V0Wm9vbV0gPSB1c2VTdGF0ZSg1KTtcbiAgICBjb25zdCBtYXAgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgbWFwQ29udGFpbmVyID0gdXNlUmVmKG51bGwpO1xuXG4gICAgY29uc3QgW2lzTW9kYWxPcGVuLCBzZXRJc01vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2lzTW9kYWxPcGVuVXBkYXRlLCBzZXRJc01vZGFsT3BlblVwZGF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBzaG93TW9kYVVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKHRydWUpO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgaGFuZGxlT2tVcGRhdGUgPSAoKSA9PiB7XG4gICAgICBzZXRJc01vZGFsT3BlblVwZGF0ZShmYWxzZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUNhbmNlbFVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2hvd01vZGFsID0gKCkgPT4ge1xuICAgICAgc2V0SXNNb2RhbE9wZW4odHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHVwZGF0ZU1hcmtlcihzZWxlY3RlZE1hcmtlcik7XG4gICAgfVxuXG5cbiAgICBjb25zdCB1cGRhdGVQYXJlbnRTdGF0ZSA9IChuZXdTdGF0ZSkgPT4ge1xuICAgICAgc2V0UGFyZW50U3RhdGUobmV3U3RhdGUpO1xuICAgICAgc2V0YWRkcmVzcyhuZXdTdGF0ZSk7XG4gICAgICBjb25zb2xlLmxvZyhuZXdTdGF0ZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUcmFpbHMoKSB7XG4gICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVzZXJfZGF0YSA9IFVzZXJEYXRhU2VydmljZS5nZXQoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyX2RhdGEpO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLmZldGNoVHJhaWxzKFwiUE9TVFwiLCAnL2FwaS90cmFpbC9yZXRyaWV2ZScsIHVzZXJfZGF0YSwgdHJ1ZSk7XG4gICAgICAgICAgICBsZXQgdHJhaWxzID0gcmVzcG9uc2UuZGF0YS50cmFpbHM7XG4gICAgICAgICAgICByZXR1cm4gdHJhaWxzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgVHJhaWxzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGdldE1hcmtlcihzZWxlY3RlZE1hcmtlcikge1xuICAgICAgY29uc29sZS5sb2coJ2dldE1hcmtlcicpO1xuICAgICAgbGV0IHRyYWlscyA9IGF3YWl0IGZldGNoVHJhaWxzKCk7XG4gICAgICBjb25zb2xlLmRpcih0cmFpbHMpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFpbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHRtcCA9IEpTT04ucGFyc2UodHJhaWxzW2ldLmdlb0pTT04pO1xuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWRNQXJrZXIgOicpO1xuICAgICAgICBjb25zb2xlLmRpcihzZWxlY3RlZE1hcmtlcik7XG4gICAgICAgIGlmICh0eXBlb2YgdG1wLmZlYXR1cmVzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdLmdlb21ldHJ5ICE9PSAndW5kZWZpbmVkJyAgJiYgdHlwZW9mIHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSAhPT0gJ3VuZGVmaW5lZCcpIHsgXG4gICAgICAgICAgaWYgKHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXSA9PT0gc2VsZWN0ZWRNYXJrZXIubG5nICYmIHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsxXSA9PT0gc2VsZWN0ZWRNYXJrZXIubGF0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBmZXRjaENvb3JkaW5hdGVzKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICBgaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9nZW9jb2RpbmcvdjUvbWFwYm94LnBsYWNlcy8ke2FkZHJlc3N9Lmpzb24/YWNjZXNzX3Rva2VuPSR7bWFwYm94Z2wuYWNjZXNzVG9rZW59YFxuICAgICAgICApO1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzcG9uc2UgOiBcIiArIGRhdGEuZmVhdHVyZXNbMF0uY2VudGVyWzBdICtcIiBcIisgZGF0YS5mZWF0dXJlc1swXS5jZW50ZXJbMV0pO1xuXG4gICAgICAgICAgcmV0dXJuIChkYXRhLmZlYXR1cmVzWzBdLmNlbnRlcik7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJoZXJlICA6IFwiICsgbmV3bGduICsgXCIgXCIgKyBuZXdsYXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvb3JkaW5hdGVzOicsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWFya2VyKHNlbGVjdGVkTWFya2VyKSB7XG4gICAgICBsZXQgaW5kZXggPSBhd2FpdCBnZXRNYXJrZXIoc2VsZWN0ZWRNYXJrZXIpO1xuICAgICAgY29uc29sZS5kaXIoaW5kZXgpO1xuICAgICAgbGV0IGRhdGEgPSB7fTtcbiAgICAgIGxldCB0cmFpbHMgPSBhd2FpdCBmZXRjaFRyYWlscyh1c2VyX2RhdGEpO1xuICAgICAgbGV0IHRtcCA9IEpTT04ucGFyc2UodHJhaWxzW2luZGV4XS5nZW9KU09OKTtcbiAgICAgIGRhdGEuaWQgPSB0cmFpbHNbaW5kZXhdLmlkO1xuICAgICAgZGF0YS5sYXRpdHVkZSA9IG5ld2xhdDtcbiAgICAgIGRhdGEubG9uZ2l0dWRlID0gbmV3bGduO1xuICAgICAgY29uc29sZS5sb2codHlwZW9mIHRtcC5mZWF0dXJlc1swXSk7XG4gICAgICBsZXQgY29vcmQgPSBhd2FpdCBmZXRjaENvb3JkaW5hdGVzKCk7XG4gICAgICBjb25zb2xlLmxvZyhcImZldGNoQ29vcmRpbmF0ZXMgOiBcIiArIGNvb3JkKTtcbiAgICAgIHNldG5ld2xnbihjb29yZFswXSk7XG4gICAgICBzZXRuZXdsYXQoY29vcmRbMV0pO1xuICAgICAgdG1wLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzBdID0gY29vcmRbMF07XG4gICAgICB0bXAuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMV0gPSBjb29yZFsxXTtcbiAgICAgIGNvbnNvbGUubG9nKCd0bXAnKTtcbiAgICAgIGNvbnNvbGUuZGlyKHRtcCk7XG4gICAgICBkYXRhLmdlb0pTT04gPSBKU09OLnN0cmluZ2lmeSh0bXApO1xuICAgICAgY29uc29sZS5sb2coJ2hlcmUnKTtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgY29uc3QgdXNlcl9kYXRhID0gVXNlckRhdGFTZXJ2aWNlLmdldCgpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuQ3JlYXRlTWFya2VyKCdQVVQnLCAnL2FwaS90cmFpbC91cGRhdGUnLCB1c2VyX2RhdGEsIGRhdGEsIHRydWUpO1xuICAgICAgbGV0IHJlc3VsdCA9IHJlc3BvbnNlLmRhdGEudHJhaWxzO1xuICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKGZhbHNlKTtcbiAgICAgIHJvdXRlci5yZWxvYWQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVPayA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJfZGF0YSA9IFVzZXJEYXRhU2VydmljZS5nZXQoKTtcbiAgICAgICAgbGV0IHRyYWlsID0ge307XG4gICAgICAgIHRyYWlsLm5hbWUgPSBcIkFkZGVkIGJ5IGFkbWluIGluIGRhc2hib2FyZFwiO1xuICAgICAgICB0cmFpbC5hZGRyZXNzID0gXCJBZGRlZCBieSBhZG1pbiBpbiBkYXNoYm9hcmRcIjtcbiAgICAgICAgdHJhaWwuZGVzY3JpcHRpb24gPSBcIkFkZGVkIGJ5IGFkbWluIGluIGRhc2hib2FyZFwiO1xuICAgICAgICB0cmFpbC5waWN0dXJlcyA9IFtcImh0dHBzOi8vZ29vZ2xlLmNvbVwiXTtcbiAgICAgICAgbGV0IGNvb3JkID0gYXdhaXQgZmV0Y2hDb29yZGluYXRlcygpO1xuICAgICAgICB0cmFpbC5sYXRpdHVkZSA9IGNvb3JkWzFdO1xuICAgICAgICB0cmFpbC5sb25naXR1ZGUgPSBjb29yZFswXTtcbiAgICAgICAgdHJhaWwuZGlmZmljdWx0eSA9IDA7XG4gICAgICAgIHRyYWlsLmR1cmF0aW9uID0gMDtcbiAgICAgICAgdHJhaWwuZGlzdGFuY2UgPSAwO1xuICAgICAgICB0cmFpbC51cGhpbGwgPSAwO1xuICAgICAgICB0cmFpbC5kb3duaGlsbCA9IDA7XG4gICAgICAgIHRyYWlsLnRvb2xzID0gW107XG4gICAgICAgIHRyYWlsLnJlbGF0ZWRBcnRpY2xlcyA9IFtdO1xuICAgICAgICB0cmFpbC5sYWJlbHMgPSBbXTtcbiAgICAgICAgbGV0IGdlb2pzb24gPSB7XG4gICAgICAgICAgZmVhdHVyZXM6IFt7XG4gICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbW1xuICAgICAgICAgICAgICAgIGNvb3JkWzBdLFxuICAgICAgICAgICAgICAgIGNvb3JkWzFdXG4gICAgICAgICAgICAgIF1dfX1dfVxuICAgICAgICB0cmFpbC5nZW9KU09OID0gSlNPTi5zdHJpbmdpZnkoZ2VvanNvbik7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLkNyZWF0ZU1hcmtlcignUE9TVCcsICcvYXBpL3RyYWlsL2NyZWF0ZScsIHVzZXJfZGF0YSwgdHJhaWwsIHRydWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIHNldElzTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgcm91dGVyLnJlbG9hZCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICBzZXRJc01vZGFsT3BlbihmYWxzZSk7XG4gICAgICAgIHJvdXRlci5yZWxvYWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHtcbiAgICAgIHNldElzTW9kYWxPcGVuKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgY29uc3QgbWFya2VyID0gbG9hZE1hcmtlcigpO1xuICAgICAgY29uc29sZS5sb2coXCJNYXJrZXJzWzBdIDogXCIgKyBNYXJrZXJzWzBdICsgXCJNYXJrZXJzWzFdIDogXCIgKyBNYXJrZXJzWzFdKTtcbiAgICAgICAgY29uc3QgdXNlcl9kYXRhID0gVXNlckRhdGFTZXJ2aWNlLmdldCgpO1xuICAgICAgICBpZiAobWFwLmN1cnJlbnQgJiYgbWFya2Vyc0xvYWRlZCA9PSB0cnVlICkgcmV0dXJuO1xuICAgICAgIC8vIGNvbnNvbGUubG9nKFwibWFya2VyczpcIiArIG1hcmtlcnMpO1xuICAgICAgICAgIG1hcC5jdXJyZW50ID0gbmV3IG1hcGJveGdsLk1hcCh7XG4gICAgICAgICAgICBjb250YWluZXI6IG1hcENvbnRhaW5lci5jdXJyZW50LFxuICAgICAgICAgICAgc3R5bGU6ICdtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjEyJyxcbiAgICAgICAgICAgIGNlbnRlcjogW01hcmtlcnNbMF0sIE1hcmtlcnNbMV1dLFxuICAgICAgICAgICAgLy9jZW50ZXI6IFtsbmcsIGxhdF0sXG4gICAgICAgICAgICB6b29tOiB6b29tXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBtYXAuY3VycmVudC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5OYXZpZ2F0aW9uQ29udHJvbCgpLCAndG9wLXJpZ2h0Jyk7XG4gICAgICAgIG1hcC5jdXJyZW50LmFkZENvbnRyb2woXG4gICAgICAgICAgbmV3IG1hcGJveGdsLkdlb2xvY2F0ZUNvbnRyb2woe1xuICAgICAgICAgICAgcG9zaXRpb25PcHRpb25zOiB7XG4gICAgICAgICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYWNrVXNlckxvY2F0aW9uOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEdlb0pTT04oKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgICBjb25zdCB1c2VyX2RhdGEyID0gVXNlckRhdGFTZXJ2aWNlLmdldCgpO1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFQSS5zZW5kKCdQT1NUJywgXCIvYXBpL3RyYWlsL3JldHJpZXZlXCIsIHVzZXJfZGF0YTIsIHRydWUpO1xuICAgICAgICAgICAgICAgIGxldCB0cmFpbHMgPSByZXNwb25zZS5kYXRhLnRyYWlscztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFpbHMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB0cmFpbHMubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICBsZXQgdG1wID0gSlNPTi5wYXJzZShpdGVtLmdlb0pTT04pO1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codG1wKTtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG1wLmZlYXR1cmVzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdICE9PSAgJ3VuZGVmaW5lZCcgICYmIHR5cGVvZiB0bXAuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0gIT09ICd1bmRlZmluZWQnICkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0bXAuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXN1bHQucHVzaCh0bXAuZmVhdHVyZXMuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgc2V0TWFya2VycyhyZXN1bHQuc2xpY2UoLTEpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBHZW9KU09OOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRNYXJrZXIoKSB7XG4gICAgICAgICAgbGV0IG1hcmtlcnMgPSBhd2FpdCBmZXRjaEdlb0pTT04odXNlcl9kYXRhKTtcbiAgICAgICAgICBsZXQgZ2VvanNvbiA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgIGZlYXR1cmVzOiBtYXJrZXJzPy5tYXAoKG1hcmtlcikgPT4gKHtcbiAgICAgICAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB7XG4gICAgICAgICAgICAgICAgICBsYXQ6IG1hcmtlclsxXSxcbiAgICAgICAgICAgICAgICAgIGxuZzogbWFya2VyWzBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9O1xuICAgICAgICAgIG1hcC5jdXJyZW50Lm9uKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgZ2VvanNvbj8uZmVhdHVyZXM/LmZvckVhY2goKG1hcmtlcikgPT4geyAgLy8gY3JlYXRlIGEgRE9NIGVsZW1lbnQgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlckljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG1hcmtlckljb24uY2xhc3NOYW1lID0gJ2xvY2F0aW9uLW1hcmtlcic7XG4gICAgICAgICAgICBtYXJrZXJJY29uLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoL2N1c3RvbS1tYXJrZXIucG5nKSc7XG4gICAgICAgICAgICBtYXJrZXJJY29uLnN0eWxlLndpZHRoID0gICc2MHB4JztcbiAgICAgICAgICAgIG1hcmtlckljb24uc3R5bGUuaGVpZ2h0ID0gJzkwcHgnO1xuICAgICAgICAgICAgbmV3IG1hcGJveGdsLk1hcmtlcihtYXJrZXJJY29uKVxuICAgICAgICAgICAgICAuc2V0TG5nTGF0KG1hcmtlci5nZW9tZXRyeS5jb29yZGluYXRlcylcbiAgICAgICAgICAgICAgLmFkZFRvKG1hcC5jdXJyZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICBtYXJrZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGlyKCdtYXJrZXIgOicgKyBKU09OLnN0cmluZ2lmeShtYXJrZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpKTtcbiAgICAgICAgICAgICAgICBzZXRzZWxlY3RlZE1hcmtlcihtYXJrZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKHRydWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldE1hcmtlcnNMb2FkZWQodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuIG1hcmtlcnMuc2xpY2UoLTEpO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5jdXJyZW50Lm9uKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGNvbnN0IGxuZ0xhdCA9IGUubG5nTGF0O1xuICAgICAgICAgIHNldGxuZ0xhdFNlbGVjdGVkKGxuZ0xhdCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1JpZ2h0LWNsaWNrZWQgYXQ6JywgbG5nTGF0KTtcbiAgICAgICAgICBzZXRJc01vZGFsT3Blbih0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgICAgLy9tYXAuY3VycmVudC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5OYXZpZ2F0aW9uQ29udHJvbCgpLCBcInRvcC1yaWdodFwiKTtcbiAgICAgICAgICAvL3JldHVybiAoKSA9PiB7IG1hcC5jdXJyZW50LnJlbW92ZSgpfTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgcmV0dXJuIChcbiAgICAgICAgPExheW91dD5cbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgICAgIC5tYXAtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9e21hcENvbnRhaW5lcn0gY2xhc3NOYW1lPVwibWFwLWNvbnRhaW5lclwiLz5cbiAgICAgICAgICAgICAgICAgICAgPE1vZGFsIHRpdGxlPVwiQWpvdXQgZHUgbWFycXVldXJcIiBvcGVuPXtpc01vZGFsT3Blbn0gb25Paz17aGFuZGxlT2t9IG9uQ2FuY2VsPXtoYW5kbGVDYW5jZWx9PlxuICAgICAgICAgICAgICAgICAgICA8cD5Wb3VsZXogdm91cyBham91dGVyIHVuIG1hcnF1ZXVyIMOgIGwnZW1wbGFjZW1lbnQgOiA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPkFkZHJlc3NlIDogPC9wPlxuICAgICAgICAgICAgICAgICAgICA8U2VhcmNoQmFyIGNoaWxkU3RhdGU9e3BhcmVudFN0YXRlfSB1cGRhdGVQYXJlbnRTdGF0ZT17dXBkYXRlUGFyZW50U3RhdGV9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxwPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiAga2V5PVwic3VibWl0XCIgdHlwZT1cInByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVPa30+XG4gICAgICAgICAgICAgICAgICAgICAgU3VibWl0XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgICAgICAgIDxNb2RhbCB0aXRsZT1cIk1vZGlmaWNhdGlvbiBkdSBtYXJxdWV1clwiIG9wZW49e2lzTW9kYWxPcGVuVXBkYXRlfSBvbk9rPXtoYW5kbGVPa1VwZGF0ZX0gb25DYW5jZWw9e2hhbmRsZUNhbmNlbFVwZGF0ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxwPkFkZHJlc3NlIDogPC9wPlxuICAgICAgICAgICAgICAgICAgICA8U2VhcmNoQmFyIGNoaWxkU3RhdGU9e3BhcmVudFN0YXRlfSB1cGRhdGVQYXJlbnRTdGF0ZT17dXBkYXRlUGFyZW50U3RhdGV9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxwPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiAga2V5PVwic3VibWl0XCIgdHlwZT1cInByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVTdWJtaXR9PlxuICAgICAgICAgICAgICAgICAgICAgIFN1Ym1pdFxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgPC9MYXlvdXQ+XG4gICAgKTtcbn0iXX0= */\\n/*@ sourceURL=/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js */\"\n    }, void 0, false, void 0, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      className: \"jsx-855806535\" + \" \" + \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ajout du marqueur\",\n      open: isModalOpen,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: \"Voulez vous ajouter un marqueur \\xE0 l'emplacement : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: \"Addresse : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        childState: parentState,\n        updateParentState: updateParentState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleOk,\n        children: \"Submit\"\n      }, \"submit\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Modification du marqueur\",\n      open: isModalOpenUpdate,\n      onOk: handleOkUpdate,\n      onCancel: handleCancelUpdate,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: \"Addresse : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        childState: parentState,\n        updateParentState: updateParentState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleSubmit,\n        children: \"Submit\"\n      }, \"submit\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"names":["React","useRef","useEffect","useState","useRouter","Layout","API","mapboxgl","accessToken","UserDataService","SearchBar","Button","Modal","Input","jsxDEV","_jsxDEV","Control","access_token","user_data","router","newlat","setnewlat","newlgn","setnewlgn","address","setaddress","input","setInput","resultsearch","setresultsearch","selectedMarker","setselectedMarker","parentState","setParentState","Trails","setTrails","lngLatSelected","setlngLatSelected","markersLoaded","setMarkersLoaded","username","setInputValueUsername","email","setInputValueEmail","Markers","setMarkers","lng","setLng","lat","setLat","zoom","setZoom","map","mapContainer","isModalOpen","setIsModalOpen","isModalOpenUpdate","setIsModalOpenUpdate","showModaUpdate","handleOkUpdate","handleCancelUpdate","showModal","handleSubmit","updateMarker","updateParentState","newState","console","log","fetchTrails","get","response","trails","data","error","getMarker","dir","i","length","tmp","JSON","parse","geoJSON","features","geometry","coordinates","fetchCoordinates","fetch","ok","json","center","statusText","index","id","latitude","longitude","coord","stringify","CreateMarker","result","reload","handleOk","trail","name","description","pictures","difficulty","duration","distance","uphill","downhill","tools","relatedArticles","labels","geojson","type","properties","handleCancel","marker","loadMarker","current","Map","container","style","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","fetchGeoJSON","user_data2","send","item","push","slice","markers","on","_geojson$features","forEach","markerIcon","document","createElement","className","backgroundImage","width","height","Marker","setLngLat","addTo","addEventListener","e","preventDefault","lngLat","children","_JSXStyle","ref","fileName","_jsxFileName","lineNumber","columnNumber","title","open","onOk","onCancel","childState","onClick"],"sources":["/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Layout from '../../components/Layout';\nimport API from '../../services/API';\nimport mapboxgl, { accessToken } from \"mapbox-gl\";\nimport UserDataService from \"../../services/UserDataService\";\nimport SearchBar from '../../components/SearchBar';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button, Modal, Input } from 'antd';\nmapboxgl.accessToken = 'pk.eyJ1IjoiaGljY3VwLXN0YWZmIiwiYSI6ImNsangxeHVkbzAyNmwzdHJ4cmJiYWZmMm4ifQ.yI4259jlMq2elDiT_uK1kg';\n\n\nexport default function Control (access_token, user_data) {\n    const router = useRouter();\n    const [newlat, setnewlat] = useState(-0.0);\n    const [newlgn, setnewlgn] =  useState(-0.0);\n    const [address, setaddress] =  useState('');\n    const [input, setInput] = useState('');\n    const [resultsearch, setresultsearch] = useState([]);\n    const [selectedMarker, setselectedMarker] = useState('');\n    const [parentState, setParentState] = useState('Initial Value');\n    const [Trails, setTrails] = useState([]);\n    const [lngLatSelected, setlngLatSelected] = useState(false);\n    const [markersLoaded, setMarkersLoaded] = useState(false);\n    const [username, setInputValueUsername] = useState('');\n    const [email, setInputValueEmail] = useState('');\n    const [Markers, setMarkers] = useState([]);\n    const [lng, setLng] = useState(2.35);\n    const [lat, setLat] = useState(48.85);\n    const [zoom, setZoom] = useState(5);\n    const map = useRef(null);\n    const mapContainer = useRef(null);\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [isModalOpenUpdate, setIsModalOpenUpdate] = useState(false);\n\n    const showModaUpdate = () => {\n      setIsModalOpenUpdate(true);\n    };\n    \n    const handleOkUpdate = () => {\n      setIsModalOpenUpdate(false);\n    };\n\n    const handleCancelUpdate = () => {\n      setIsModalOpenUpdate(false);\n    };\n\n    const showModal = () => {\n      setIsModalOpen(true);\n    };\n\n    const handleSubmit = async () => {\n      updateMarker(selectedMarker);\n    }\n\n\n    const updateParentState = (newState) => {\n      setParentState(newState);\n      setaddress(newState);\n      console.log(newState);\n    }\n\n    async function fetchTrails() {\n      try {\n          const user_data = UserDataService.get();\n          console.log(user_data);\n          const response = await API.fetchTrails(\"POST\", '/api/trail/retrieve', user_data, true);\n            let trails = response.data.trails;\n            return trails;\n        } catch (error) {\n            console.error('Error fetching Trails:', error);\n        }\n    }\n\n    async function getMarker(selectedMarker) {\n      console.log('getMarker');\n      let trails = await fetchTrails();\n      console.dir(trails);\n      for (var i = 0; i < trails.length; i++) {\n        let tmp = JSON.parse(trails[i].geoJSON);\n        console.log('selectedMArker :');\n        console.dir(selectedMarker);\n        if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0].geometry !== 'undefined'  && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') { \n          if (tmp.features[0].geometry.coordinates[0][0] === selectedMarker.lng && tmp.features[0].geometry.coordinates[0][1] === selectedMarker.lat) {\n            return i;\n          }\n        }\n      }\n    }\n\n    async function fetchCoordinates() {\n      try {\n        const response = await fetch(\n          `https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?access_token=${mapboxgl.accessToken}`\n        );\n        if (response.ok) {\n          const data = await response.json();\n          console.log(\"response : \" + data.features[0].center[0] +\" \"+ data.features[0].center[1]);\n\n          return (data.features[0].center);\n          console.log(\"here  : \" + newlgn + \" \" + newlat);\n        } else {\n          console.error('Error fetching coordinates:', response.statusText);\n        }\n      } catch (error) {\n        console.error('Error:', error);\n      }\n    }\n\n    async function updateMarker(selectedMarker) {\n      let index = await getMarker(selectedMarker);\n      console.dir(index);\n      let data = {};\n      let trails = await fetchTrails(user_data);\n      let tmp = JSON.parse(trails[index].geoJSON);\n      data.id = trails[index].id;\n      data.latitude = newlat;\n      data.longitude = newlgn;\n      console.log(typeof tmp.features[0]);\n      let coord = await fetchCoordinates();\n      console.log(\"fetchCoordinates : \" + coord);\n      setnewlgn(coord[0]);\n      setnewlat(coord[1]);\n      tmp.features[0].geometry.coordinates[0][0] = coord[0];\n      tmp.features[0].geometry.coordinates[0][1] = coord[1];\n      console.log('tmp');\n      console.dir(tmp);\n      data.geoJSON = JSON.stringify(tmp);\n      console.log('here');\n      console.log(data);\n      const user_data = UserDataService.get();\n      const response = await API.CreateMarker('PUT', '/api/trail/update', user_data, data, true);\n      let result = response.data.trails;\n      console.log(result);\n      setIsModalOpenUpdate(false);\n      router.reload();\n    }\n\n    const handleOk = async () => {\n      try {\n        const user_data = UserDataService.get();\n        let trail = {};\n        trail.name = \"Added by admin in dashboard\";\n        trail.address = \"Added by admin in dashboard\";\n        trail.description = \"Added by admin in dashboard\";\n        trail.pictures = [\"https://google.com\"];\n        let coord = await fetchCoordinates();\n        trail.latitude = coord[1];\n        trail.longitude = coord[0];\n        trail.difficulty = 0;\n        trail.duration = 0;\n        trail.distance = 0;\n        trail.uphill = 0;\n        trail.downhill = 0;\n        trail.tools = [];\n        trail.relatedArticles = [];\n        trail.labels = [];\n        let geojson = {\n          features: [{\n            type: 'Feature',\n            properties: {},\n            geometry: {\n              type: 'Point',\n              coordinates: [[\n                coord[0],\n                coord[1]\n              ]]}}]}\n        trail.geoJSON = JSON.stringify(geojson);\n        const response = await API.CreateMarker('POST', '/api/trail/create', user_data, trail, true);\n        console.log(response);\n        setIsModalOpen(false);\n        router.reload();\n      } catch (error) {\n        console.log(error);\n        setIsModalOpen(false);\n        router.reload();\n      }\n    };\n    const handleCancel = () => {\n      setIsModalOpen(false);\n    };\n\n    useEffect(() => {\n     const marker = loadMarker();\n      console.log(\"Markers[0] : \" + Markers[0] + \"Markers[1] : \" + Markers[1]);\n        const user_data = UserDataService.get();\n        if (map.current && markersLoaded == true ) return;\n       // console.log(\"markers:\" + markers);\n          map.current = new mapboxgl.Map({\n            container: mapContainer.current,\n            style: 'mapbox://styles/mapbox/streets-v12',\n            center: [Markers[0], Markers[1]],\n            //center: [lng, lat],\n            zoom: zoom\n            });\n\n        map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n        map.current.addControl(\n          new mapboxgl.GeolocateControl({\n            positionOptions: {\n              enableHighAccuracy: true\n            },\n            trackUserLocation: true\n          })\n        );\n\n        async function fetchGeoJSON() {\n          try {\n              let result = [];\n              const user_data2 = UserDataService.get();\n              const response = await API.send('POST', \"/api/trail/retrieve\", user_data2, true);\n                let trails = response.data.trails;\n                console.log(trails);\n                console.log(response);\n                trails.map((item) => {\n                  let tmp = JSON.parse(item.geoJSON);\n                  console.log(tmp);\n                  if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0] !==  'undefined'  && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined' ) {\n                    result.push(tmp.features[0].geometry.coordinates[0]);\n                  } else {\n                    //result.push(tmp.features.geometry.coordinates);\n                  }\n                });\n                console.log(result);\n                setMarkers(result.slice(-1));\n                return result;\n            } catch (error) {\n                console.error('Error fetching GeoJSON:', error);\n            }\n        }\n\n        async function loadMarker() {\n          let markers = await fetchGeoJSON(user_data);\n          let geojson = {\n            type: 'Feature',\n            features: markers?.map((marker) => ({\n              geometry: {\n                type: 'Point',\n                coordinates: {\n                  lat: marker[1],\n                  lng: marker[0]\n                }\n              }\n            }))\n          };\n          map.current.on('load', () => {\n            geojson?.features?.forEach((marker) => {  // create a DOM element for the marker\n            const markerIcon = document.createElement('div');\n            markerIcon.className = 'location-marker';\n            markerIcon.style.backgroundImage = 'url(/custom-marker.png)';\n            markerIcon.style.width =  '60px';\n            markerIcon.style.height = '90px';\n            new mapboxgl.Marker(markerIcon)\n              .setLngLat(marker.geometry.coordinates)\n              .addTo(map.current);\n            \n              markerIcon.addEventListener('click', () => {\n                console.dir('marker :' + JSON.stringify(marker.geometry.coordinates));\n                setselectedMarker(marker.geometry.coordinates);\n                setIsModalOpenUpdate(true);\n              });\n            });\n          });\n          setMarkersLoaded(true);\n          return markers.slice(-1);\n        }\n        map.current.on('contextmenu', (e) => {\n          e.preventDefault();\n          const lngLat = e.lngLat;\n          setlngLatSelected(lngLat);\n          console.log('Right-clicked at:', lngLat);\n          setIsModalOpen(true);\n        });\n          //map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n          //return () => { map.current.remove()};\n      });\n      \n    return (\n        <Layout>\n                <style jsx>{`\n                    .map-container {\n                        position: absolute;\n                        width: 100%;\n                        height: 100%;\n                    }\n                    `}</style>\n                    <div ref={mapContainer} className=\"map-container\"/>\n                    <Modal title=\"Ajout du marqueur\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}>\n                    <p>Voulez vous ajouter un marqueur à l'emplacement : </p>\n                    <p>Addresse : </p>\n                    <SearchBar childState={parentState} updateParentState={updateParentState} />\n                    <p></p>\n                    <Button  key=\"submit\" type=\"primary\" onClick={handleOk}>\n                      Submit\n                    </Button>\n                  </Modal>\n                  <Modal title=\"Modification du marqueur\" open={isModalOpenUpdate} onOk={handleOkUpdate} onCancel={handleCancelUpdate}>\n                    <p>Addresse : </p>\n                    <SearchBar childState={parentState} updateParentState={updateParentState} />\n                    <p></p>\n                    <Button  key=\"submit\" type=\"primary\" onClick={handleSubmit}>\n                      Submit\n                    </Button>\n                    </Modal>\n        </Layout>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}