{"ast":null,"code":"var _jsxFileName = \"/Users/draki/Documents/Epitech/EIP/admin/pages/index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Router from 'next/router';\nimport { Card, Alert, Input, Button, Layout } from 'antd';\nimport API from '../services/API';\nimport AccessTokenService from \"../services/AccessTokenService\";\nconst Login = () => {\n  useEffect(() => {\n    const token = AccessTokenService.get();\n    if (token) Router.push('/control');\n  });\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const submit = async () => {\n    const data = {\n      email,\n      password\n    };\n    setError(null);\n    setLoading(true);\n    const response = await API.send('POST', '/auth/login', data, false);\n    const rslt = JSON.parse(response);\n    setLoading(false);\n    if (response.status === 200) {\n      AccessTokenService.set(response.data.accessToken);\n      await Router.push('/control');\n    } else if (response.status === 401) setError(\"Bad credentials\");else setError(\"An error occurred\");\n  };\n  return __jsx(Layout, {\n    style: {\n      height: \"100vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, __jsx(Card, {\n    style: {\n      width: 400,\n      backgroundColor: \"#fff\",\n      margin: \"auto\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, error && __jsx(Alert, {\n    style: {\n      marginBottom: 30\n    },\n    message: error,\n    type: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 21\n    }\n  }), __jsx(Input, {\n    placeholder: \"Email\",\n    value: email,\n    onChange: event => setEmail(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }), __jsx(Input, {\n    style: {\n      marginTop: 15\n    },\n    placeholder: \"Password\",\n    value: password,\n    type: \"password\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), __jsx(Button, {\n    type: \"primary\",\n    onClick: submit,\n    loading: loading,\n    style: {\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, \"Submit\")));\n};\nexport default Login;","map":{"version":3,"names":["React","useEffect","useState","Router","Card","Alert","Input","Button","Layout","API","AccessTokenService","Login","token","get","push","email","setEmail","password","setPassword","loading","setLoading","error","setError","submit","data","response","send","rslt","JSON","parse","status","set","accessToken","__jsx","style","height","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","width","backgroundColor","margin","textAlign","marginBottom","message","type","placeholder","value","onChange","event","target","marginTop","onClick"],"sources":["/Users/draki/Documents/Epitech/EIP/admin/pages/index.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Router from 'next/router'\n\nimport {Card, Alert, Input, Button, Layout} from 'antd';\n\nimport API from '../services/API';\nimport AccessTokenService from \"../services/AccessTokenService\";\n\nconst Login = () => {\n    useEffect(() => {\n        const token = AccessTokenService.get();\n        if (token)\n            Router.push('/control');\n    });\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const submit = async () => {\n        const data = {\n            email,\n            password,\n        }\n\n        setError(null);\n        setLoading(true);\n        const response = await API.send('POST', '/auth/login', data, false);\n        const rslt = JSON.parse(response);\n        setLoading(false);\n\n        if (response.status === 200) {\n            AccessTokenService.set(response.data.accessToken);\n            await Router.push('/control');\n        } else if (response.status === 401)\n            setError(\"Bad credentials\");\n        else\n            setError(\"An error occurred\");\n    }\n\n    return (\n        <Layout style={{height: \"100vh\"}}>\n            <Card style={{width: 400, backgroundColor: \"#fff\", margin: \"auto\", textAlign: \"center\"}}>\n                {error && (\n                    <Alert style={{marginBottom: 30}} message={error} type=\"error\" />\n                )}\n                <Input\n                    placeholder={\"Email\"}\n                    value={email}\n                    onChange={(event) => setEmail(event.target.value)}\n                />\n                <Input\n                    style={{marginTop: 15}}\n                    placeholder={\"Password\"}\n                    value={password}\n                    type={\"password\"}\n                    onChange={(event) => setPassword(event.target.value)}\n                />\n                <Button\n                    type={\"primary\"}\n                    onClick={submit}\n                    loading={loading}\n                    style={{marginTop: 20}}\n                >\n                    Submit\n                </Button>\n            </Card>\n        </Layout>\n    );\n}\n\nexport default Login\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,MAAM,MAAM,aAAa;AAEhC,SAAQC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAEC,MAAM,EAAEC,MAAM,QAAO,MAAM;AAEvD,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,kBAAkB,MAAM,gCAAgC;AAE/D,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAChBV,SAAS,CAAC,MAAM;IACZ,MAAMW,KAAK,GAAGF,kBAAkB,CAACG,GAAG,CAAC,CAAC;IACtC,IAAID,KAAK,EACLT,MAAM,CAACW,IAAI,CAAC,UAAU,CAAC;EAC/B,CAAC,CAAC;EAEF,MAAM;IAAA,GAACC,KAAK;IAAA,GAAEC;EAAQ,IAAId,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM;IAAA,GAACe,QAAQ;IAAA,GAAEC;EAAW,IAAIhB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM;IAAA,GAACiB,OAAO;IAAA,GAAEC;EAAU,IAAIlB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM;IAAA,GAACmB,KAAK;IAAA,GAAEC;EAAQ,IAAIpB,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMqB,MAAM,GAAG,MAAAA,CAAA,KAAY;IACvB,MAAMC,IAAI,GAAG;MACTT,KAAK;MACLE;IACJ,CAAC;IAEDK,QAAQ,CAAC,IAAI,CAAC;IACdF,UAAU,CAAC,IAAI,CAAC;IAChB,MAAMK,QAAQ,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CAAC,MAAM,EAAE,aAAa,EAAEF,IAAI,EAAE,KAAK,CAAC;IACnE,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC;IACjCL,UAAU,CAAC,KAAK,CAAC;IAEjB,IAAIK,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;MACzBpB,kBAAkB,CAACqB,GAAG,CAACN,QAAQ,CAACD,IAAI,CAACQ,WAAW,CAAC;MACjD,MAAM7B,MAAM,CAACW,IAAI,CAAC,UAAU,CAAC;IACjC,CAAC,MAAM,IAAIW,QAAQ,CAACK,MAAM,KAAK,GAAG,EAC9BR,QAAQ,CAAC,iBAAiB,CAAC,CAAC,KAE5BA,QAAQ,CAAC,mBAAmB,CAAC;EACrC,CAAC;EAED,OACIW,KAAA,CAACzB,MAAM;IAAC0B,KAAK,EAAE;MAACC,MAAM,EAAE;IAAO,CAAE;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC7BR,KAAA,CAAC7B,IAAI;IAAC8B,KAAK,EAAE;MAACQ,KAAK,EAAE,GAAG;MAAEC,eAAe,EAAE,MAAM;MAAEC,MAAM,EAAE,MAAM;MAAEC,SAAS,EAAE;IAAQ,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACnFpB,KAAK,IACFY,KAAA,CAAC5B,KAAK;IAAC6B,KAAK,EAAE;MAACY,YAAY,EAAE;IAAE,CAAE;IAACC,OAAO,EAAE1B,KAAM;IAAC2B,IAAI,EAAC,OAAO;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACnE,EACDR,KAAA,CAAC3B,KAAK;IACF2C,WAAW,EAAE,OAAQ;IACrBC,KAAK,EAAEnC,KAAM;IACboC,QAAQ,EAAGC,KAAK,IAAKpC,QAAQ,CAACoC,KAAK,CAACC,MAAM,CAACH,KAAK,CAAE;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACrD,CAAC,EACFR,KAAA,CAAC3B,KAAK;IACF4B,KAAK,EAAE;MAACoB,SAAS,EAAE;IAAE,CAAE;IACvBL,WAAW,EAAE,UAAW;IACxBC,KAAK,EAAEjC,QAAS;IAChB+B,IAAI,EAAE,UAAW;IACjBG,QAAQ,EAAGC,KAAK,IAAKlC,WAAW,CAACkC,KAAK,CAACC,MAAM,CAACH,KAAK,CAAE;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACxD,CAAC,EACFR,KAAA,CAAC1B,MAAM;IACHyC,IAAI,EAAE,SAAU;IAChBO,OAAO,EAAEhC,MAAO;IAChBJ,OAAO,EAAEA,OAAQ;IACjBe,KAAK,EAAE;MAACoB,SAAS,EAAE;IAAE,CAAE;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC1B,QAEO,CACN,CACF,CAAC;AAEjB,CAAC;AAED,eAAe9B,KAAK"},"metadata":{},"sourceType":"module"}