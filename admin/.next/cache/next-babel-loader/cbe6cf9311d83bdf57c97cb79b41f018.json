{"ast":null,"code":"var _jsxFileName = \"/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport Router from 'next/router';\nimport { Card, Alert, Input, Button, Layout } from 'antd';\nimport API from '../services/API';\nimport AccessTokenService from \"../services/AccessTokenService\";\nimport UserDataService from \"../services/UserDataService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  useEffect(() => {\n    const token = AccessTokenService.get();\n    if (token) Router.push('/control');\n  });\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const submit = async () => {\n    const data = {\n      email,\n      password\n    };\n    setError(null);\n    setLoading(true);\n    const response = await API.send('POST', '/api/auth/login', data, false);\n    //const rslt = JSON.parse(response);\n    setLoading(false);\n    if (response.status === 200) {\n      //  if (response.data.user.roles[0] == \"ADMIN\") {\n      console.log(response.data.user.roles[0]);\n      AccessTokenService.set(response.data.user.token);\n      UserDataService.set(response.data.user);\n      await Router.push('/control');\n      // } else {\n      //     setError(\"Non Admin Users\");\n      // }\n    } else if (response.status === 401) setError(\"Bad credentials\");else setError(\"An error occurred\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      backgroundImage: `url(\"./static/images/background.png\")`\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        paddingTop: \"45vh\",\n        width: 400,\n        backgroundColor: \"#fff\",\n        margin: \"auto\",\n        textAlign: \"center\"\n      },\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        style: {\n          marginBottom: 30\n        },\n        message: error,\n        type: \"error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Email\",\n        value: email,\n        onChange: event => setEmail(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        style: {\n          marginTop: 15\n        },\n        placeholder: \"Password\",\n        value: password,\n        type: \"password\",\n        onChange: event => setPassword(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: submit,\n        loading: loading,\n        style: {\n          marginTop: 20\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\nexport default Login;","map":{"version":3,"names":["React","useEffect","useState","Router","Card","Alert","Input","Button","Layout","API","AccessTokenService","UserDataService","jsxDEV","_jsxDEV","Login","token","get","push","email","setEmail","password","setPassword","loading","setLoading","error","setError","submit","data","response","send","status","console","log","user","roles","set","style","height","backgroundImage","children","paddingTop","width","backgroundColor","margin","textAlign","marginBottom","message","type","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","event","target","marginTop","onClick"],"sources":["/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/index.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Router from 'next/router';\nimport {Card, Alert, Input, Button, Layout} from 'antd';\nimport API from '../services/API';\nimport AccessTokenService from \"../services/AccessTokenService\";\nimport UserDataService from \"../services/UserDataService\";\n\n\nconst Login = () => {\n    useEffect(() => {\n        const token = AccessTokenService.get();\n        if (token)\n            Router.push('/control');\n    });\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const submit = async () => {\n        const data = {\n            email,\n            password,\n        }\n        setError(null);\n        setLoading(true);\n        const response = await API.send('POST', '/api/auth/login', data, false);\n        //const rslt = JSON.parse(response);\n        setLoading(false);\n        if (response.status === 200) {\n          //  if (response.data.user.roles[0] == \"ADMIN\") {\n                console.log(response.data.user.roles[0]);\n                AccessTokenService.set(response.data.user.token);\n                UserDataService.set(response.data.user);\n                await Router.push('/control');\n           // } else {\n           //     setError(\"Non Admin Users\");\n           // }\n        } else if (response.status === 401)\n            setError(\"Bad credentials\");\n        else\n            setError(\"An error occurred\");\n    }\n\n    return (\n        <div style={{height: \"100vh\", backgroundImage: `url(\"./static/images/background.png\")`}}>\n            <Card style={{paddingTop: \"45vh\", width: 400, backgroundColor: \"#fff\", margin: \"auto\", textAlign: \"center\"}}>\n                {error && (\n                    <Alert style={{marginBottom: 30}} message={error} type=\"error\" />\n                )}\n                <Input\n                    placeholder={\"Email\"}\n                    value={email}\n                    onChange={(event) => setEmail(event.target.value)}\n                />\n                <Input\n                    style={{marginTop: 15}}\n                    placeholder={\"Password\"}\n                    value={password}\n                    type={\"password\"}\n                    onChange={(event) => setPassword(event.target.value)}\n                />\n                <Button\n                    type={\"primary\"}\n                    onClick={submit}\n                    loading={loading}\n                    style={{marginTop: 20}}\n                >\n                    Submit\n                </Button>\n            </Card>\n            </div>\n    );\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}