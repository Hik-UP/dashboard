{"ast":null,"code":"var _jsxFileName = \"/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useRef, useEffect, useState } from 'react';\nimport Layout from '../../components/Layout';\nimport API from '../../services/API';\nimport mapboxgl, { accessToken } from \"mapbox-gl\";\nimport UserDataService from \"../../services/UserDataService\";\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button, Modal, Input } from 'antd';\nmapboxgl.accessToken = 'pk.eyJ1IjoiaGljY3VwLXN0YWZmIiwiYSI6ImNsangxeHVkbzAyNmwzdHJ4cmJiYWZmMm4ifQ.yI4259jlMq2elDiT_uK1kg';\nexport default function Control(access_token, user_data) {\n  const {\n    0: newlat,\n    1: setnewlat\n  } = useState(false);\n  const {\n    0: newlgn,\n    1: setnewlgn\n  } = useState(0);\n  const {\n    0: lngLatSelected,\n    1: setlngLatSelected\n  } = useState(false);\n  const {\n    0: username,\n    1: setInputValueUsername\n  } = useState('');\n  const {\n    0: email,\n    1: setInputValueEmail\n  } = useState('');\n  const {\n    0: lng,\n    1: setLng\n  } = useState(2.35);\n  const {\n    0: lat,\n    1: setLat\n  } = useState(48.85);\n  const {\n    0: zoom,\n    1: setZoom\n  } = useState(5);\n  const map = useRef(null);\n  const mapContainer = useRef(null);\n  const {\n    0: isModalOpen,\n    1: setIsModalOpen\n  } = useState(false);\n  const {\n    0: isModalOpenUpdate,\n    1: setIsModalOpenUpdate\n  } = useState(false);\n  const showModaUpdate = () => {\n    setIsModalOpenUpdate(true);\n  };\n  const handleOkUpdate = () => {\n    setIsModalOpenUpdate(false);\n  };\n  const handleCancelUpdate = () => {\n    setIsModalOpenUpdate(false);\n  };\n  const showModal = () => {\n    setIsModalOpen(true);\n  };\n  const handleSubmit = async () => {};\n  const handleOk = async () => {\n    try {\n      const user_data = UserDataService.get();\n      let trail = {};\n      trail.name = \"Added by admin in dashboard\";\n      trail.address = \"Added by admin in dashboard\";\n      trail.description = \"Added by admin in dashboard\";\n      trail.pictures = [\"https://google.com\"];\n      trail.latitude = lngLatSelected.lat;\n      trail.longitude = lngLatSelected.lng;\n      trail.difficulty = 0;\n      trail.duration = 0;\n      trail.distance = 0;\n      trail.uphill = 0;\n      trail.downhill = 0;\n      trail.tools = [];\n      trail.relatedArticles = [];\n      trail.labels = [];\n      let geojson = {\n        features: [{\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Point',\n            coordinates: [lngLatSelected.lat, lngLatSelected.lng]\n          }\n        }]\n      };\n      trail.geoJSON = JSON.stringify(geojson);\n      const response = await API.CreateMarker('POST', '/api/trail/create', user_data, trail, true);\n      console.log(response);\n      setIsModalOpen(false);\n    } catch (error) {\n      console.log(error);\n      setIsModalOpen(false);\n    }\n  };\n  const handleCancel = () => {\n    setIsModalOpen(false);\n  };\n  useEffect(() => {\n    const user_data = UserDataService.get();\n    if (map.current) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12',\n      center: [lng, lat],\n      zoom: zoom\n    });\n    map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n    map.current.addControl(new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      trackUserLocation: true\n    }));\n    async function fetchGeoJSON(user_data) {\n      try {\n        console.log(user_data);\n        let result = [];\n        const response = await API.send('POST', '/api/trail/retrieve', user_data, true);\n        let trails = response.data.trails;\n        console.log(trails);\n        trails.map(item => {\n          let tmp = JSON.parse(item.geoJSON);\n          console.log(tmp);\n          if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && 'undefined' && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') {\n            result.push(tmp.features[0].geometry.coordinates[0]);\n          } else {\n            //result.push(tmp.features.geometry.coordinates);\n          }\n        });\n        console.log(result);\n        return result;\n      } catch (error) {\n        console.error('Error fetching GeoJSON:', error);\n      }\n    }\n    async function loadMarker() {\n      let markers = await fetchGeoJSON(user_data);\n      let geojson = {\n        type: 'Feature',\n        features: markers.map(marker => ({\n          geometry: {\n            type: 'Point',\n            coordinates: {\n              lat: marker[1],\n              lng: marker[0]\n            }\n          }\n        }))\n      };\n      map.current.on('load', () => {\n        geojson.features.forEach(marker => {\n          // create a DOM element for the marker\n          const markerIcon = document.createElement('div');\n          markerIcon.className = 'location-marker';\n          markerIcon.style.backgroundImage = 'url(/custom-marker.png)';\n          markerIcon.style.width = '60px';\n          markerIcon.style.height = '90px';\n          new mapboxgl.Marker(markerIcon).setLngLat(marker.geometry.coordinates).addTo(map.current);\n          markerIcon.addEventListener('click', () => {\n            // Open the modal when the marker is clicked\n            //openModal(marker.name);\n            setIsModalOpenUpdate(true);\n          });\n        });\n      });\n    }\n    loadMarker();\n    map.current.on('contextmenu', e => {\n      e.preventDefault();\n      const lngLat = e.lngLat;\n      setlngLatSelected(lngLat);\n      console.log('Right-clicked at:', lngLat);\n      setIsModalOpen(true);\n    });\n    //map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n    //return () => { map.current.remove()};\n  });\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, __jsx(_JSXStyle, {\n    id: \"855806535\",\n    __self: this\n  }, \".map-container.jsx-855806535{position:absolute;width:100%;height:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kcmFraS9Eb2N1bWVudHMvRXBpdGVjaC9FSVAvZGFzaGJvYXJkL2FkbWluL3BhZ2VzL2NvbnRyb2wvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcUw0QixBQUcyQyxrQkFDUCxXQUNDLFlBQ2hCIiwiZmlsZSI6Ii9Vc2Vycy9kcmFraS9Eb2N1bWVudHMvRXBpdGVjaC9FSVAvZGFzaGJvYXJkL2FkbWluL3BhZ2VzL2NvbnRyb2wvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgQVBJIGZyb20gJy4uLy4uL3NlcnZpY2VzL0FQSSc7XG5pbXBvcnQgbWFwYm94Z2wsIHsgYWNjZXNzVG9rZW4gfSBmcm9tIFwibWFwYm94LWdsXCI7XG5pbXBvcnQgVXNlckRhdGFTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9Vc2VyRGF0YVNlcnZpY2VcIjtcblxuaW1wb3J0ICdtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wuY3NzJztcbmltcG9ydCB7IEJ1dHRvbiwgTW9kYWwsIElucHV0IH0gZnJvbSAnYW50ZCc7XG5tYXBib3hnbC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWFHbGpZM1Z3TFhOMFlXWm1JaXdpWVNJNkltTnNhbmd4ZUhWa2J6QXlObXd6ZEhKNGNtSmlZV1ptTW00aWZRLnlJNDI1OWpsTXEyZWxEaVRfdUsxa2cnO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29udHJvbCAoYWNjZXNzX3Rva2VuLCB1c2VyX2RhdGEpIHtcblxuICAgIGNvbnN0IFtuZXdsYXQsIHNldG5ld2xhdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW25ld2xnbiwgc2V0bmV3bGduXSA9ICB1c2VTdGF0ZSgwKTtcblxuICAgIGNvbnN0IFtsbmdMYXRTZWxlY3RlZCwgc2V0bG5nTGF0U2VsZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgY29uc3QgW3VzZXJuYW1lLCBzZXRJbnB1dFZhbHVlVXNlcm5hbWVdID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtlbWFpbCwgc2V0SW5wdXRWYWx1ZUVtYWlsXSA9IHVzZVN0YXRlKCcnKTtcblxuICAgIGNvbnN0IFtsbmcsIHNldExuZ10gPSB1c2VTdGF0ZSgyLjM1KTtcbiAgICBjb25zdCBbbGF0LCBzZXRMYXRdID0gdXNlU3RhdGUoNDguODUpO1xuICAgIGNvbnN0IFt6b29tLCBzZXRab29tXSA9IHVzZVN0YXRlKDUpO1xuICAgIGNvbnN0IG1hcCA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBtYXBDb250YWluZXIgPSB1c2VSZWYobnVsbCk7XG5cbiAgICBjb25zdCBbaXNNb2RhbE9wZW4sIHNldElzTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbaXNNb2RhbE9wZW5VcGRhdGUsIHNldElzTW9kYWxPcGVuVXBkYXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIGNvbnN0IHNob3dNb2RhVXBkYXRlID0gKCkgPT4ge1xuICAgICAgc2V0SXNNb2RhbE9wZW5VcGRhdGUodHJ1ZSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBoYW5kbGVPa1VwZGF0ZSA9ICgpID0+IHtcbiAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ2FuY2VsVXBkYXRlID0gKCkgPT4ge1xuICAgICAgc2V0SXNNb2RhbE9wZW5VcGRhdGUoZmFsc2UpO1xuICAgIH07XG5cbiAgICBjb25zdCBzaG93TW9kYWwgPSAoKSA9PiB7XG4gICAgICBzZXRJc01vZGFsT3Blbih0cnVlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKCkgPT4ge1xuXG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZU9rID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlcl9kYXRhID0gVXNlckRhdGFTZXJ2aWNlLmdldCgpO1xuICAgICAgICBsZXQgdHJhaWwgPSB7fTtcbiAgICAgICAgdHJhaWwubmFtZSA9IFwiQWRkZWQgYnkgYWRtaW4gaW4gZGFzaGJvYXJkXCI7XG4gICAgICAgIHRyYWlsLmFkZHJlc3MgPSBcIkFkZGVkIGJ5IGFkbWluIGluIGRhc2hib2FyZFwiO1xuICAgICAgICB0cmFpbC5kZXNjcmlwdGlvbiA9IFwiQWRkZWQgYnkgYWRtaW4gaW4gZGFzaGJvYXJkXCI7XG4gICAgICAgIHRyYWlsLnBpY3R1cmVzID0gW1wiaHR0cHM6Ly9nb29nbGUuY29tXCJdO1xuICAgICAgICB0cmFpbC5sYXRpdHVkZSA9IGxuZ0xhdFNlbGVjdGVkLmxhdDtcbiAgICAgICAgdHJhaWwubG9uZ2l0dWRlID0gbG5nTGF0U2VsZWN0ZWQubG5nO1xuICAgICAgICB0cmFpbC5kaWZmaWN1bHR5ID0gMDtcbiAgICAgICAgdHJhaWwuZHVyYXRpb24gPSAwO1xuICAgICAgICB0cmFpbC5kaXN0YW5jZSA9IDA7XG4gICAgICAgIHRyYWlsLnVwaGlsbCA9IDA7XG4gICAgICAgIHRyYWlsLmRvd25oaWxsID0gMDtcbiAgICAgICAgdHJhaWwudG9vbHMgPSBbXTtcbiAgICAgICAgdHJhaWwucmVsYXRlZEFydGljbGVzID0gW107XG4gICAgICAgIHRyYWlsLmxhYmVscyA9IFtdO1xuICAgICAgICBsZXQgZ2VvanNvbiA9IHtcbiAgICAgICAgICBmZWF0dXJlczogW3tcbiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtcbiAgICAgICAgICAgICAgICBsbmdMYXRTZWxlY3RlZC5sYXQsXG4gICAgICAgICAgICAgICAgbG5nTGF0U2VsZWN0ZWQubG5nXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9fV19XG4gICAgICAgIHRyYWlsLmdlb0pTT04gPSBKU09OLnN0cmluZ2lmeShnZW9qc29uKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuQ3JlYXRlTWFya2VyKCdQT1NUJywgJy9hcGkvdHJhaWwvY3JlYXRlJywgdXNlcl9kYXRhLCB0cmFpbCwgdHJ1ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgc2V0SXNNb2RhbE9wZW4oZmFsc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICBzZXRJc01vZGFsT3BlbihmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVDYW5jZWwgPSAoKSA9PiB7XG4gICAgICBzZXRJc01vZGFsT3BlbihmYWxzZSk7XG4gICAgfTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJfZGF0YSA9IFVzZXJEYXRhU2VydmljZS5nZXQoKTtcbiAgICAgICAgaWYgKG1hcC5jdXJyZW50KSByZXR1cm47IC8vIGluaXRpYWxpemUgbWFwIG9ubHkgb25jZVxuICAgICAgICBtYXAuY3VycmVudCA9IG5ldyBtYXBib3hnbC5NYXAoe1xuICAgICAgICBjb250YWluZXI6IG1hcENvbnRhaW5lci5jdXJyZW50LFxuICAgICAgICBzdHlsZTogJ21hcGJveDovL3N0eWxlcy9tYXBib3gvc3RyZWV0cy12MTInLFxuICAgICAgICBjZW50ZXI6IFtsbmcsIGxhdF0sXG4gICAgICAgIHpvb206IHpvb21cbiAgICAgICAgfSk7XG4gICAgICAgIG1hcC5jdXJyZW50LmFkZENvbnRyb2wobmV3IG1hcGJveGdsLk5hdmlnYXRpb25Db250cm9sKCksICd0b3AtcmlnaHQnKTtcbiAgICAgICAgbWFwLmN1cnJlbnQuYWRkQ29udHJvbChcbiAgICAgICAgICBuZXcgbWFwYm94Z2wuR2VvbG9jYXRlQ29udHJvbCh7XG4gICAgICAgICAgICBwb3NpdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJhY2tVc2VyTG9jYXRpb246IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEdlb0pTT04odXNlcl9kYXRhKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJfZGF0YSk7XG4gICAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuc2VuZCgnUE9TVCcsICcvYXBpL3RyYWlsL3JldHJpZXZlJywgdXNlcl9kYXRhLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBsZXQgdHJhaWxzID0gcmVzcG9uc2UuZGF0YS50cmFpbHM7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJhaWxzKTtcbiAgICAgICAgICAgICAgICB0cmFpbHMubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICBsZXQgdG1wID0gSlNPTi5wYXJzZShpdGVtLmdlb0pTT04pO1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codG1wKTtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG1wLmZlYXR1cmVzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdICE9PSAndW5kZWZpbmVkJyAmJiAndW5kZWZpbmVkJyAgJiYgdHlwZW9mIHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSAhPT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL3Jlc3VsdC5wdXNoKHRtcC5mZWF0dXJlcy5nZW9tZXRyeS5jb29yZGluYXRlcyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBHZW9KU09OOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkTWFya2VyKCkge1xuICAgICAgICAgIGxldCBtYXJrZXJzID0gYXdhaXQgZmV0Y2hHZW9KU09OKHVzZXJfZGF0YSk7XG4gICAgICAgICAgbGV0IGdlb2pzb24gPSB7XG4gICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICBmZWF0dXJlczogbWFya2Vycy5tYXAoKG1hcmtlcikgPT4gKHtcbiAgICAgICAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB7XG4gICAgICAgICAgICAgICAgICBsYXQ6IG1hcmtlclsxXSxcbiAgICAgICAgICAgICAgICAgIGxuZzogbWFya2VyWzBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9O1xuICAgICAgICAgIG1hcC5jdXJyZW50Lm9uKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgZ2VvanNvbi5mZWF0dXJlcy5mb3JFYWNoKChtYXJrZXIpID0+IHsgIC8vIGNyZWF0ZSBhIERPTSBlbGVtZW50IGZvciB0aGUgbWFya2VyXG4gICAgICAgICAgICBjb25zdCBtYXJrZXJJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBtYXJrZXJJY29uLmNsYXNzTmFtZSA9ICdsb2NhdGlvbi1tYXJrZXInO1xuICAgICAgICAgICAgbWFya2VySWNvbi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKC9jdXN0b20tbWFya2VyLnBuZyknO1xuICAgICAgICAgICAgbWFya2VySWNvbi5zdHlsZS53aWR0aCA9ICAnNjBweCc7XG4gICAgICAgICAgICBtYXJrZXJJY29uLnN0eWxlLmhlaWdodCA9ICc5MHB4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3IG1hcGJveGdsLk1hcmtlcihtYXJrZXJJY29uKVxuICAgICAgICAgICAgICAuc2V0TG5nTGF0KG1hcmtlci5nZW9tZXRyeS5jb29yZGluYXRlcylcbiAgICAgICAgICAgICAgLmFkZFRvKG1hcC5jdXJyZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICBtYXJrZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIE9wZW4gdGhlIG1vZGFsIHdoZW4gdGhlIG1hcmtlciBpcyBjbGlja2VkXG4gICAgICAgICAgICAgICAgLy9vcGVuTW9kYWwobWFya2VyLm5hbWUpO1xuICAgICAgICAgICAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKHRydWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZE1hcmtlcigpO1xuICAgICAgICBtYXAuY3VycmVudC5vbignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBjb25zdCBsbmdMYXQgPSBlLmxuZ0xhdDtcbiAgICAgICAgICBzZXRsbmdMYXRTZWxlY3RlZChsbmdMYXQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdSaWdodC1jbGlja2VkIGF0OicsIGxuZ0xhdCk7XG4gICAgICAgICAgc2V0SXNNb2RhbE9wZW4odHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAgIC8vbWFwLmN1cnJlbnQuYWRkQ29udHJvbChuZXcgbWFwYm94Z2wuTmF2aWdhdGlvbkNvbnRyb2woKSwgXCJ0b3AtcmlnaHRcIik7XG4gICAgICAgICAgLy9yZXR1cm4gKCkgPT4geyBtYXAuY3VycmVudC5yZW1vdmUoKX07XG4gICAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxMYXlvdXQ+XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICAgICAgICAgICAubWFwLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPXttYXBDb250YWluZXJ9IGNsYXNzTmFtZT1cIm1hcC1jb250YWluZXJcIi8+XG4gICAgICAgICAgICAgICAgICAgIDxNb2RhbCB0aXRsZT1cIkFqb3V0IGRlIG1hcnF1ZXVyXCIgb3Blbj17aXNNb2RhbE9wZW59IG9uT2s9e2hhbmRsZU9rfSBvbkNhbmNlbD17aGFuZGxlQ2FuY2VsfT5cbiAgICAgICAgICAgICAgICAgICAgPHA+Vm91bGV6IHZvdXMgYWpvdXRlciB1biBtYXJxdWV1ciDDoCBsJ2VtcGxhY2VtZW50IDogPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5sb25naXR1ZGUgOiB7bG5nTGF0U2VsZWN0ZWQubG5nfSA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPmxhdGl0dWRlOiB7bG5nTGF0U2VsZWN0ZWQubGF0fTwvcD5cbiAgICAgICAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICAgICAgICAgICA8TW9kYWwgdGl0bGU9XCJNb2RpZmljYXRpb24gZHUgbWFycXVldXJcIiBvcGVuPXtpc01vZGFsT3BlblVwZGF0ZX0gb25Paz17aGFuZGxlT2tVcGRhdGV9IG9uQ2FuY2VsPXtoYW5kbGVDYW5jZWxVcGRhdGV9PlxuICAgICAgICAgICAgICAgICAgICA8cD5sb25naXR1ZGUgOiA8L3A+IDwgSW5wdXQgcGxhY2Vob2xkZXI9XCJsb25naXR1ZGVcIiBvbkNoYW5nZT17ZSA9PiB7IHNldG5ld2xnbihlLmN1cnJlbnRUYXJnZXQudmFsdWUpOyB9fS8+XG4gICAgICAgICAgICAgICAgICAgIDxwPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+bGF0aXR1ZGU6IDwvcD48SW5wdXQgcGxhY2Vob2xkZXI9XCJsYXRpdHVkZVwiIG9uQ2hhbmdlPXtlID0+IHsgc2V0bmV3bGF0KGUuY3VycmVudFRhcmdldC52YWx1ZSk7IH19Lz5cbiAgICAgICAgICAgICAgICAgICAgPHA+PC9wPlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGtleT1cInN1Ym1pdFwiIHR5cGU9XCJwcmltYXJ5XCIgb25DbGljaz17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgICBTdWJtaXRcbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICAgICA8dGl0bGU+SGlrJ1VQIEFkbWluPC90aXRsZT5cbiAgICAgICAgPC9MYXlvdXQ+XG4gICAgKTtcbn0iXX0= */\\n/*@ sourceURL=/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js */\"), __jsx(\"div\", {\n    ref: mapContainer,\n    className: \"jsx-855806535\" + \" \" + \"map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }), __jsx(Modal, {\n    title: \"Ajout de marqueur\",\n    open: isModalOpen,\n    onOk: handleOk,\n    onCancel: handleCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, \"Voulez vous ajouter un marqueur \\xE0 l'emplacement : \"), __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, \"longitude : \", lngLatSelected.lng, \" \"), __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }, \"latitude: \", lngLatSelected.lat)), __jsx(Modal, {\n    title: \"Modification du marqueur\",\n    open: isModalOpenUpdate,\n    onOk: handleOkUpdate,\n    onCancel: handleCancelUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 19\n    }\n  }, __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, \"longitude : \"), \" \", __jsx(Input, {\n    placeholder: \"longitude\",\n    onChange: e => {\n      setnewlgn(e.currentTarget.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 41\n    }\n  }), __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }), __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, \"latitude: \"), __jsx(Input, {\n    placeholder: \"latitude\",\n    onChange: e => {\n      setnewlat(e.currentTarget.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 38\n    }\n  }), __jsx(\"p\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }), __jsx(Button, {\n    key: \"submit\",\n    type: \"primary\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, \"Submit\")), __jsx(\"title\", {\n    className: \"jsx-855806535\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \"Hik'UP Admin\"));\n}","map":{"version":3,"names":["React","useRef","useEffect","useState","Layout","API","mapboxgl","accessToken","UserDataService","Button","Modal","Input","Control","access_token","user_data","newlat","setnewlat","newlgn","setnewlgn","lngLatSelected","setlngLatSelected","username","setInputValueUsername","email","setInputValueEmail","lng","setLng","lat","setLat","zoom","setZoom","map","mapContainer","isModalOpen","setIsModalOpen","isModalOpenUpdate","setIsModalOpenUpdate","showModaUpdate","handleOkUpdate","handleCancelUpdate","showModal","handleSubmit","handleOk","get","trail","name","address","description","pictures","latitude","longitude","difficulty","duration","distance","uphill","downhill","tools","relatedArticles","labels","geojson","features","type","properties","geometry","coordinates","geoJSON","JSON","stringify","response","CreateMarker","console","log","error","handleCancel","current","Map","container","style","center","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","fetchGeoJSON","result","send","trails","data","item","tmp","parse","push","loadMarker","markers","marker","on","forEach","markerIcon","document","createElement","className","backgroundImage","width","height","Marker","setLngLat","addTo","addEventListener","e","preventDefault","lngLat","__jsx","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_JSXStyle","id","ref","title","open","onOk","onCancel","placeholder","onChange","currentTarget","value","key","onClick"],"sources":["/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport Layout from '../../components/Layout';\nimport API from '../../services/API';\nimport mapboxgl, { accessToken } from \"mapbox-gl\";\nimport UserDataService from \"../../services/UserDataService\";\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button, Modal, Input } from 'antd';\nmapboxgl.accessToken = 'pk.eyJ1IjoiaGljY3VwLXN0YWZmIiwiYSI6ImNsangxeHVkbzAyNmwzdHJ4cmJiYWZmMm4ifQ.yI4259jlMq2elDiT_uK1kg';\n\n\n\nexport default function Control (access_token, user_data) {\n\n    const [newlat, setnewlat] = useState(false);\n    const [newlgn, setnewlgn] =  useState(0);\n\n    const [lngLatSelected, setlngLatSelected] = useState(false);\n\n    const [username, setInputValueUsername] = useState('');\n    const [email, setInputValueEmail] = useState('');\n\n    const [lng, setLng] = useState(2.35);\n    const [lat, setLat] = useState(48.85);\n    const [zoom, setZoom] = useState(5);\n    const map = useRef(null);\n    const mapContainer = useRef(null);\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [isModalOpenUpdate, setIsModalOpenUpdate] = useState(false);\n\n    const showModaUpdate = () => {\n      setIsModalOpenUpdate(true);\n    };\n    \n    const handleOkUpdate = () => {\n      setIsModalOpenUpdate(false);\n    };\n\n    const handleCancelUpdate = () => {\n      setIsModalOpenUpdate(false);\n    };\n\n    const showModal = () => {\n      setIsModalOpen(true);\n    };\n\n    const handleSubmit = async () => {\n\n    }\n    const handleOk = async () => {\n      try {\n        const user_data = UserDataService.get();\n        let trail = {};\n        trail.name = \"Added by admin in dashboard\";\n        trail.address = \"Added by admin in dashboard\";\n        trail.description = \"Added by admin in dashboard\";\n        trail.pictures = [\"https://google.com\"];\n        trail.latitude = lngLatSelected.lat;\n        trail.longitude = lngLatSelected.lng;\n        trail.difficulty = 0;\n        trail.duration = 0;\n        trail.distance = 0;\n        trail.uphill = 0;\n        trail.downhill = 0;\n        trail.tools = [];\n        trail.relatedArticles = [];\n        trail.labels = [];\n        let geojson = {\n          features: [{\n            type: 'Feature',\n            properties: {},\n            geometry: {\n              type: 'Point',\n              coordinates: [\n                lngLatSelected.lat,\n                lngLatSelected.lng\n              ],\n            }}]}\n        trail.geoJSON = JSON.stringify(geojson);\n        const response = await API.CreateMarker('POST', '/api/trail/create', user_data, trail, true);\n        console.log(response);\n        setIsModalOpen(false);\n      } catch (error) {\n        console.log(error);\n        setIsModalOpen(false);\n      }\n    };\n    const handleCancel = () => {\n      setIsModalOpen(false);\n    };\n\n    useEffect(() => {\n        const user_data = UserDataService.get();\n        if (map.current) return; // initialize map only once\n        map.current = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/streets-v12',\n        center: [lng, lat],\n        zoom: zoom\n        });\n        map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n        map.current.addControl(\n          new mapboxgl.GeolocateControl({\n            positionOptions: {\n              enableHighAccuracy: true\n            },\n            trackUserLocation: true\n          })\n        );\n        async function fetchGeoJSON(user_data) {\n          try {\n            console.log(user_data);\n              let result = [];\n              const response = await API.send('POST', '/api/trail/retrieve', user_data, true);\n                let trails = response.data.trails;\n                console.log(trails);\n                trails.map((item) => {\n                  let tmp = JSON.parse(item.geoJSON);\n                  console.log(tmp);\n                  if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && 'undefined'  && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined' ) {\n                    result.push(tmp.features[0].geometry.coordinates[0]);\n                  } else {\n                    //result.push(tmp.features.geometry.coordinates);\n                  }\n                });\n                console.log(result);\n                return result;\n            } catch (error) {\n                console.error('Error fetching GeoJSON:', error);\n            }\n        }\n        async function loadMarker() {\n          let markers = await fetchGeoJSON(user_data);\n          let geojson = {\n            type: 'Feature',\n            features: markers.map((marker) => ({\n              geometry: {\n                type: 'Point',\n                coordinates: {\n                  lat: marker[1],\n                  lng: marker[0]\n                }\n              }\n            }))\n          };\n          map.current.on('load', () => {\n            geojson.features.forEach((marker) => {  // create a DOM element for the marker\n            const markerIcon = document.createElement('div');\n            markerIcon.className = 'location-marker';\n            markerIcon.style.backgroundImage = 'url(/custom-marker.png)';\n            markerIcon.style.width =  '60px';\n            markerIcon.style.height = '90px';\n            \n            new mapboxgl.Marker(markerIcon)\n              .setLngLat(marker.geometry.coordinates)\n              .addTo(map.current);\n            \n              markerIcon.addEventListener('click', () => {\n                // Open the modal when the marker is clicked\n                //openModal(marker.name);\n                setIsModalOpenUpdate(true);\n              });\n            });\n\n          });\n        }\n        loadMarker();\n        map.current.on('contextmenu', (e) => {\n          e.preventDefault();\n          const lngLat = e.lngLat;\n          setlngLatSelected(lngLat);\n          console.log('Right-clicked at:', lngLat);\n          setIsModalOpen(true);\n        });\n          //map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n          //return () => { map.current.remove()};\n      });\n\n    return (\n        <Layout>\n                <style jsx>{`\n                    .map-container {\n                        position: absolute;\n                        width: 100%;\n                        height: 100%;\n                    }\n                    `}</style>\n                    <div ref={mapContainer} className=\"map-container\"/>\n                    <Modal title=\"Ajout de marqueur\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}>\n                    <p>Voulez vous ajouter un marqueur à l'emplacement : </p>\n                    <p>longitude : {lngLatSelected.lng} </p>\n                    <p>latitude: {lngLatSelected.lat}</p>\n                  </Modal>\n                  <Modal title=\"Modification du marqueur\" open={isModalOpenUpdate} onOk={handleOkUpdate} onCancel={handleCancelUpdate}>\n                    <p>longitude : </p> < Input placeholder=\"longitude\" onChange={e => { setnewlgn(e.currentTarget.value); }}/>\n                    <p></p>\n                    <p>latitude: </p><Input placeholder=\"latitude\" onChange={e => { setnewlat(e.currentTarget.value); }}/>\n                    <p></p>\n                    <Button key=\"submit\" type=\"primary\" onClick={handleSubmit}>\n                      Submit\n                    </Button>\n                    </Modal>\n            <title>Hik'UP Admin</title>\n        </Layout>\n    );\n}"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,MAAM,MAAM,yBAAyB;AAC5C,OAAOC,GAAG,MAAM,oBAAoB;AACpC,OAAOC,QAAQ,IAAIC,WAAW,QAAQ,WAAW;AACjD,OAAOC,eAAe,MAAM,gCAAgC;AAE5D,OAAO,8BAA8B;AACrC,SAASC,MAAM,EAAEC,KAAK,EAAEC,KAAK,QAAQ,MAAM;AAC3CL,QAAQ,CAACC,WAAW,GAAG,kGAAkG;AAIzH,eAAe,SAASK,OAAOA,CAAEC,YAAY,EAAEC,SAAS,EAAE;EAEtD,MAAM;IAAA,GAACC,MAAM;IAAA,GAAEC;EAAS,IAAIb,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM;IAAA,GAACc,MAAM;IAAA,GAAEC;EAAS,IAAKf,QAAQ,CAAC,CAAC,CAAC;EAExC,MAAM;IAAA,GAACgB,cAAc;IAAA,GAAEC;EAAiB,IAAIjB,QAAQ,CAAC,KAAK,CAAC;EAE3D,MAAM;IAAA,GAACkB,QAAQ;IAAA,GAAEC;EAAqB,IAAInB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM;IAAA,GAACoB,KAAK;IAAA,GAAEC;EAAkB,IAAIrB,QAAQ,CAAC,EAAE,CAAC;EAEhD,MAAM;IAAA,GAACsB,GAAG;IAAA,GAAEC;EAAM,IAAIvB,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM;IAAA,GAACwB,GAAG;IAAA,GAAEC;EAAM,IAAIzB,QAAQ,CAAC,KAAK,CAAC;EACrC,MAAM;IAAA,GAAC0B,IAAI;IAAA,GAAEC;EAAO,IAAI3B,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM4B,GAAG,GAAG9B,MAAM,CAAC,IAAI,CAAC;EACxB,MAAM+B,YAAY,GAAG/B,MAAM,CAAC,IAAI,CAAC;EAEjC,MAAM;IAAA,GAACgC,WAAW;IAAA,GAAEC;EAAc,IAAI/B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM;IAAA,GAACgC,iBAAiB;IAAA,GAAEC;EAAoB,IAAIjC,QAAQ,CAAC,KAAK,CAAC;EAEjE,MAAMkC,cAAc,GAAGA,CAAA,KAAM;IAC3BD,oBAAoB,CAAC,IAAI,CAAC;EAC5B,CAAC;EAED,MAAME,cAAc,GAAGA,CAAA,KAAM;IAC3BF,oBAAoB,CAAC,KAAK,CAAC;EAC7B,CAAC;EAED,MAAMG,kBAAkB,GAAGA,CAAA,KAAM;IAC/BH,oBAAoB,CAAC,KAAK,CAAC;EAC7B,CAAC;EAED,MAAMI,SAAS,GAAGA,CAAA,KAAM;IACtBN,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMO,YAAY,GAAG,MAAAA,CAAA,KAAY,CAEjC,CAAC;EACD,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI;MACF,MAAM5B,SAAS,GAAGN,eAAe,CAACmC,GAAG,CAAC,CAAC;MACvC,IAAIC,KAAK,GAAG,CAAC,CAAC;MACdA,KAAK,CAACC,IAAI,GAAG,6BAA6B;MAC1CD,KAAK,CAACE,OAAO,GAAG,6BAA6B;MAC7CF,KAAK,CAACG,WAAW,GAAG,6BAA6B;MACjDH,KAAK,CAACI,QAAQ,GAAG,CAAC,oBAAoB,CAAC;MACvCJ,KAAK,CAACK,QAAQ,GAAG9B,cAAc,CAACQ,GAAG;MACnCiB,KAAK,CAACM,SAAS,GAAG/B,cAAc,CAACM,GAAG;MACpCmB,KAAK,CAACO,UAAU,GAAG,CAAC;MACpBP,KAAK,CAACQ,QAAQ,GAAG,CAAC;MAClBR,KAAK,CAACS,QAAQ,GAAG,CAAC;MAClBT,KAAK,CAACU,MAAM,GAAG,CAAC;MAChBV,KAAK,CAACW,QAAQ,GAAG,CAAC;MAClBX,KAAK,CAACY,KAAK,GAAG,EAAE;MAChBZ,KAAK,CAACa,eAAe,GAAG,EAAE;MAC1Bb,KAAK,CAACc,MAAM,GAAG,EAAE;MACjB,IAAIC,OAAO,GAAG;QACZC,QAAQ,EAAE,CAAC;UACTC,IAAI,EAAE,SAAS;UACfC,UAAU,EAAE,CAAC,CAAC;UACdC,QAAQ,EAAE;YACRF,IAAI,EAAE,OAAO;YACbG,WAAW,EAAE,CACX7C,cAAc,CAACQ,GAAG,EAClBR,cAAc,CAACM,GAAG;UAEtB;QAAC,CAAC;MAAC,CAAC;MACRmB,KAAK,CAACqB,OAAO,GAAGC,IAAI,CAACC,SAAS,CAACR,OAAO,CAAC;MACvC,MAAMS,QAAQ,GAAG,MAAM/D,GAAG,CAACgE,YAAY,CAAC,MAAM,EAAE,mBAAmB,EAAEvD,SAAS,EAAE8B,KAAK,EAAE,IAAI,CAAC;MAC5F0B,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;MACrBlC,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC,OAAOsC,KAAK,EAAE;MACdF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;MAClBtC,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC;EACD,MAAMuC,YAAY,GAAGA,CAAA,KAAM;IACzBvC,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC;EAEDhC,SAAS,CAAC,MAAM;IACZ,MAAMY,SAAS,GAAGN,eAAe,CAACmC,GAAG,CAAC,CAAC;IACvC,IAAIZ,GAAG,CAAC2C,OAAO,EAAE,OAAO,CAAC;IACzB3C,GAAG,CAAC2C,OAAO,GAAG,IAAIpE,QAAQ,CAACqE,GAAG,CAAC;MAC/BC,SAAS,EAAE5C,YAAY,CAAC0C,OAAO;MAC/BG,KAAK,EAAE,oCAAoC;MAC3CC,MAAM,EAAE,CAACrD,GAAG,EAAEE,GAAG,CAAC;MAClBE,IAAI,EAAEA;IACN,CAAC,CAAC;IACFE,GAAG,CAAC2C,OAAO,CAACK,UAAU,CAAC,IAAIzE,QAAQ,CAAC0E,iBAAiB,CAAC,CAAC,EAAE,WAAW,CAAC;IACrEjD,GAAG,CAAC2C,OAAO,CAACK,UAAU,CACpB,IAAIzE,QAAQ,CAAC2E,gBAAgB,CAAC;MAC5BC,eAAe,EAAE;QACfC,kBAAkB,EAAE;MACtB,CAAC;MACDC,iBAAiB,EAAE;IACrB,CAAC,CACH,CAAC;IACD,eAAeC,YAAYA,CAACvE,SAAS,EAAE;MACrC,IAAI;QACFwD,OAAO,CAACC,GAAG,CAACzD,SAAS,CAAC;QACpB,IAAIwE,MAAM,GAAG,EAAE;QACf,MAAMlB,QAAQ,GAAG,MAAM/D,GAAG,CAACkF,IAAI,CAAC,MAAM,EAAE,qBAAqB,EAAEzE,SAAS,EAAE,IAAI,CAAC;QAC7E,IAAI0E,MAAM,GAAGpB,QAAQ,CAACqB,IAAI,CAACD,MAAM;QACjClB,OAAO,CAACC,GAAG,CAACiB,MAAM,CAAC;QACnBA,MAAM,CAACzD,GAAG,CAAE2D,IAAI,IAAK;UACnB,IAAIC,GAAG,GAAGzB,IAAI,CAAC0B,KAAK,CAACF,IAAI,CAACzB,OAAO,CAAC;UAClCK,OAAO,CAACC,GAAG,CAACoB,GAAG,CAAC;UAChB,IAAI,OAAOA,GAAG,CAAC/B,QAAQ,KAAK,WAAW,IAAI,OAAO+B,GAAG,CAAC/B,QAAQ,CAAC,CAAC,CAAC,KAAK,WAAW,IAAI,WAAW,IAAK,OAAO+B,GAAG,CAAC/B,QAAQ,CAAC,CAAC,CAAC,CAACG,QAAQ,CAACC,WAAW,CAAC,CAAC,CAAC,KAAK,WAAW,EAAG;YACpKsB,MAAM,CAACO,IAAI,CAACF,GAAG,CAAC/B,QAAQ,CAAC,CAAC,CAAC,CAACG,QAAQ,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC;UACtD,CAAC,MAAM;YACL;UAAA;QAEJ,CAAC,CAAC;QACFM,OAAO,CAACC,GAAG,CAACe,MAAM,CAAC;QACnB,OAAOA,MAAM;MACjB,CAAC,CAAC,OAAOd,KAAK,EAAE;QACZF,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACnD;IACJ;IACA,eAAesB,UAAUA,CAAA,EAAG;MAC1B,IAAIC,OAAO,GAAG,MAAMV,YAAY,CAACvE,SAAS,CAAC;MAC3C,IAAI6C,OAAO,GAAG;QACZE,IAAI,EAAE,SAAS;QACfD,QAAQ,EAAEmC,OAAO,CAAChE,GAAG,CAAEiE,MAAM,KAAM;UACjCjC,QAAQ,EAAE;YACRF,IAAI,EAAE,OAAO;YACbG,WAAW,EAAE;cACXrC,GAAG,EAAEqE,MAAM,CAAC,CAAC,CAAC;cACdvE,GAAG,EAAEuE,MAAM,CAAC,CAAC;YACf;UACF;QACF,CAAC,CAAC;MACJ,CAAC;MACDjE,GAAG,CAAC2C,OAAO,CAACuB,EAAE,CAAC,MAAM,EAAE,MAAM;QAC3BtC,OAAO,CAACC,QAAQ,CAACsC,OAAO,CAAEF,MAAM,IAAK;UAAG;UACxC,MAAMG,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UAChDF,UAAU,CAACG,SAAS,GAAG,iBAAiB;UACxCH,UAAU,CAACtB,KAAK,CAAC0B,eAAe,GAAG,yBAAyB;UAC5DJ,UAAU,CAACtB,KAAK,CAAC2B,KAAK,GAAI,MAAM;UAChCL,UAAU,CAACtB,KAAK,CAAC4B,MAAM,GAAG,MAAM;UAEhC,IAAInG,QAAQ,CAACoG,MAAM,CAACP,UAAU,CAAC,CAC5BQ,SAAS,CAACX,MAAM,CAACjC,QAAQ,CAACC,WAAW,CAAC,CACtC4C,KAAK,CAAC7E,GAAG,CAAC2C,OAAO,CAAC;UAEnByB,UAAU,CAACU,gBAAgB,CAAC,OAAO,EAAE,MAAM;YACzC;YACA;YACAzE,oBAAoB,CAAC,IAAI,CAAC;UAC5B,CAAC,CAAC;QACJ,CAAC,CAAC;MAEJ,CAAC,CAAC;IACJ;IACA0D,UAAU,CAAC,CAAC;IACZ/D,GAAG,CAAC2C,OAAO,CAACuB,EAAE,CAAC,aAAa,EAAGa,CAAC,IAAK;MACnCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,MAAMC,MAAM,GAAGF,CAAC,CAACE,MAAM;MACvB5F,iBAAiB,CAAC4F,MAAM,CAAC;MACzB1C,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEyC,MAAM,CAAC;MACxC9E,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC;IACA;IACA;EACJ,CAAC,CAAC;;EAEJ,OACI+E,KAAA,CAAC7G,MAAM;IAAA8G,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAAN,KAAA,CAAAO,SAAA;IAAAC,EAAA;IAAAP,MAAA;EAAA,goVAQKD,KAAA;IAAKS,GAAG,EAAE1F,YAAa;IAAAsE,SAAA,0BAAW,eAAe;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CAAC,EACnDN,KAAA,CAACvG,KAAK;IAACiH,KAAK,EAAC,mBAAmB;IAACC,IAAI,EAAE3F,WAAY;IAAC4F,IAAI,EAAEnF,QAAS;IAACoF,QAAQ,EAAErD,YAAa;IAAAyC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC3FN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,uDAAqD,CAAC,EACzDN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,cAAY,EAACpG,cAAc,CAACM,GAAG,EAAC,GAAI,CAAC,EACxCwF,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,YAAU,EAACpG,cAAc,CAACQ,GAAO,CAC/B,CAAC,EACRsF,KAAA,CAACvG,KAAK;IAACiH,KAAK,EAAC,0BAA0B;IAACC,IAAI,EAAEzF,iBAAkB;IAAC0F,IAAI,EAAEvF,cAAe;IAACwF,QAAQ,EAAEvF,kBAAmB;IAAA2E,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAClHN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,cAAe,CAAC,KAAC,EAAAN,KAAA,CAAEtG,KAAK;IAACoH,WAAW,EAAC,WAAW;IAACC,QAAQ,EAAElB,CAAC,IAAI;MAAE5F,SAAS,CAAC4F,CAAC,CAACmB,aAAa,CAACC,KAAK,CAAC;IAAE,CAAE;IAAAhB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CAAC,EAC3GN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAM,CAAC,EACPN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,YAAa,CAAC,EAAAN,KAAA,CAACtG,KAAK;IAACoH,WAAW,EAAC,UAAU;IAACC,QAAQ,EAAElB,CAAC,IAAI;MAAE9F,SAAS,CAAC8F,CAAC,CAACmB,aAAa,CAACC,KAAK,CAAC;IAAE,CAAE;IAAAhB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CAAC,EACtGN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAM,CAAC,EACPN,KAAA,CAACxG,MAAM;IAAC0H,GAAG,EAAC,QAAQ;IAACtE,IAAI,EAAC,SAAS;IAACuE,OAAO,EAAE3F,YAAa;IAAAyE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAEnD,CACD,CAAC,EAChBN,KAAA;IAAAX,SAAA;IAAAY,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAO,cAAmB,CACtB,CAAC;AAEjB"},"metadata":{},"sourceType":"module"}