{"ast":null,"code":"var _jsxFileName = \"/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport Layout from '../../components/Layout';\nimport API from '../../services/API';\nimport mapboxgl, { accessToken } from \"mapbox-gl\";\nimport UserDataService from \"../../services/UserDataService\";\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button, Modal, Input } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = 'pk.eyJ1IjoiaGljY3VwLXN0YWZmIiwiYSI6ImNsangxeHVkbzAyNmwzdHJ4cmJiYWZmMm4ifQ.yI4259jlMq2elDiT_uK1kg';\nexport default function Control(access_token, user_data) {\n  const {\n    0: newlat,\n    1: setnewlat\n  } = useState(false);\n  const {\n    0: newlgn,\n    1: setnewlgn\n  } = useState(0);\n  const {\n    0: address,\n    1: setaddress\n  } = useState('');\n  const {\n    0: input,\n    1: setInput\n  } = useState('');\n  const {\n    0: results,\n    1: setResults\n  } = useState([]);\n  const {\n    0: selectedMarker,\n    1: setselectedMarker\n  } = useState('');\n  const {\n    0: Trails,\n    1: setTrails\n  } = useState([]);\n  const {\n    0: lngLatSelected,\n    1: setlngLatSelected\n  } = useState(false);\n  const {\n    0: markersLoaded,\n    1: setMarkersLoaded\n  } = useState(false);\n  const {\n    0: username,\n    1: setInputValueUsername\n  } = useState('');\n  const {\n    0: email,\n    1: setInputValueEmail\n  } = useState('');\n  const {\n    0: lng,\n    1: setLng\n  } = useState(2.35);\n  const {\n    0: lat,\n    1: setLat\n  } = useState(48.85);\n  const {\n    0: zoom,\n    1: setZoom\n  } = useState(5);\n  const map = useRef(null);\n  const mapContainer = useRef(null);\n  const {\n    0: isModalOpen,\n    1: setIsModalOpen\n  } = useState(false);\n  const {\n    0: isModalOpenUpdate,\n    1: setIsModalOpenUpdate\n  } = useState(false);\n  const showModaUpdate = () => {\n    setIsModalOpenUpdate(true);\n  };\n  const handleOkUpdate = () => {\n    setIsModalOpenUpdate(false);\n  };\n  const handleCancelUpdate = () => {\n    setIsModalOpenUpdate(false);\n  };\n  const showModal = () => {\n    setIsModalOpen(true);\n  };\n  const handleSubmit = async () => {\n    if (address) {\n      const fetchResults = async () => {\n        try {\n          const response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?access_token=${mapboxgl.accessToken}`);\n          if (response.ok) {\n            const data = await response.json();\n            setResults(data.features);\n          } else {\n            console.error('Error fetching results:', response.statusText);\n          }\n        } catch (error) {\n          console.error('Error:', error);\n        }\n        fetchResults();\n      };\n    } else {\n      setResults([]);\n    }\n    updateMarker(selectedMarker);\n  };\n  async function fetchTrails() {\n    try {\n      const user_data = UserDataService.get();\n      console.log(user_data);\n      const response = await API.fetchTrails(\"POST\", '/api/trail/retrieve', user_data, true);\n      let trails = response.data.trails;\n      return trails;\n    } catch (error) {\n      console.error('Error fetching Trails:', error);\n    }\n  }\n  async function getMarker(selectedMarker) {\n    console.log('getMarker');\n    let trails = await fetchTrails();\n    console.dir(trails);\n    for (var i = 0; i < trails.length; i++) {\n      let tmp = JSON.parse(trails[i].geoJSON);\n      console.log('selectedMArker :');\n      console.dir(selectedMarker);\n      if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0].geometry !== 'undefined' && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') {\n        if (tmp.features[0].geometry.coordinates[0][0] === selectedMarker.lng && tmp.features[0].geometry.coordinates[0][1] === selectedMarker.lat) {\n          return i;\n        }\n      }\n    }\n  }\n  const fetchCoordinates = async () => {\n    try {\n      const response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?access_token=${mapboxgl.accessToken}`);\n      if (response.ok) {\n        const data = await response.json();\n        const [longitude, latitude] = data.features[0].center;\n        setnewlat(latitude);\n        setnewlgn(longitude);\n      } else {\n        console.error('Error fetching coordinates:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n  async function updateMarker(selectedMarker) {\n    let index = await getMarker(selectedMarker);\n    console.dir(index);\n    fetchCoordinates();\n    let data = {};\n    let trails = await fetchTrails(user_data);\n    let tmp = JSON.parse(trails[index].geoJSON);\n    console.log('tmp:');\n    console.dir(tmp);\n    data.id = trails[index].id;\n    data.latitude = parseInt(newlat);\n    data.longitude = parseInt(newlgn);\n    console.log(typeof tmp.features[0]);\n    //if (typeof tmp.features[0] !== 'undefined' && tmp.features[0].geometry ==! 'undefined'  && typeof tmp.features[0].geometry.coordinates !== 'undefined') { \n    tmp.features[0].geometry.coordinates[0][0] = parseInt(newlgn);\n    tmp.features[0].geometry.coordinates[0][1] = parseInt(newlat);\n    //}\n    console.log('tmp');\n    console.dir(tmp);\n    data.geoJSON = JSON.stringify(tmp);\n    console.log('here');\n    console.log(data);\n    const user_data = UserDataService.get();\n    const response = await API.CreateMarker('PUT', '/api/trail/update', user_data, data, true);\n    let result = response.data.trails;\n    console.log(result);\n    setIsModalOpenUpdate(false);\n  }\n  const handleOk = async () => {\n    try {\n      const user_data = UserDataService.get();\n      let trail = {};\n      trail.name = \"Added by admin in dashboard\";\n      trail.address = \"Added by admin in dashboard\";\n      trail.description = \"Added by admin in dashboard\";\n      trail.pictures = [\"https://google.com\"];\n      trail.latitude = lngLatSelected.lat;\n      trail.longitude = lngLatSelected.lng;\n      trail.difficulty = 0;\n      trail.duration = 0;\n      trail.distance = 0;\n      trail.uphill = 0;\n      trail.downhill = 0;\n      trail.tools = [];\n      trail.relatedArticles = [];\n      trail.labels = [];\n      let geojson = {\n        features: [{\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Point',\n            coordinates: [[lngLatSelected.lng, lngLatSelected.lat]]\n          }\n        }]\n      };\n      trail.geoJSON = JSON.stringify(geojson);\n      const response = await API.CreateMarker('POST', '/api/trail/create', user_data, trail, true);\n      console.log(response);\n      setIsModalOpen(false);\n    } catch (error) {\n      console.log(error);\n      setIsModalOpen(false);\n    }\n  };\n  const handleCancel = () => {\n    setIsModalOpen(false);\n  };\n  useEffect(() => {\n    const user_data = UserDataService.get();\n    loadMarker();\n    if (map.current && markersLoaded == true) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12',\n      center: [lng, lat],\n      zoom: zoom\n    });\n    map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n    map.current.addControl(new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      trackUserLocation: true\n    }));\n    async function fetchGeoJSON() {\n      try {\n        let result = [];\n        const user_data2 = UserDataService.get();\n        const response = await API.send('POST', \"/api/trail/retrieve\", user_data2, true);\n        let trails = response.data.trails;\n        console.log(trails);\n        console.log(response);\n        trails.map(item => {\n          let tmp = JSON.parse(item.geoJSON);\n          console.log(tmp);\n          if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') {\n            result.push(tmp.features[0].geometry.coordinates[0]);\n          } else {\n            //result.push(tmp.features.geometry.coordinates);\n          }\n        });\n        console.log(result);\n        return result;\n      } catch (error) {\n        console.error('Error fetching GeoJSON:', error);\n      }\n    }\n    function isMarkerPresent() {\n      // Check some condition, data, or event to determine if the marker is present\n      // Return true if the marker is present, false if not\n      return true;\n    }\n    async function loadMarker() {\n      let markers = await fetchGeoJSON(user_data);\n      let geojson = {\n        type: 'Feature',\n        features: markers === null || markers === void 0 ? void 0 : markers.map(marker => ({\n          geometry: {\n            type: 'Point',\n            coordinates: {\n              lat: marker[1],\n              lng: marker[0]\n            }\n          }\n        }))\n      };\n      map.current.on('load', () => {\n        var _geojson$features;\n        geojson === null || geojson === void 0 ? void 0 : (_geojson$features = geojson.features) === null || _geojson$features === void 0 ? void 0 : _geojson$features.forEach(marker => {\n          // create a DOM element for the marker\n          const markerIcon = document.createElement('div');\n          markerIcon.className = 'location-marker';\n          markerIcon.style.backgroundImage = 'url(/custom-marker.png)';\n          markerIcon.style.width = '60px';\n          markerIcon.style.height = '90px';\n          new mapboxgl.Marker(markerIcon).setLngLat(marker.geometry.coordinates).addTo(map.current);\n          markerIcon.addEventListener('click', () => {\n            console.dir('marker :' + JSON.stringify(marker.geometry.coordinates));\n            setselectedMarker(marker.geometry.coordinates);\n            setIsModalOpenUpdate(true);\n          });\n        });\n      });\n      setMarkersLoaded(true);\n    }\n    map.current.on('contextmenu', e => {\n      e.preventDefault();\n      const lngLat = e.lngLat;\n      setlngLatSelected(lngLat);\n      console.log('Right-clicked at:', lngLat);\n      setIsModalOpen(true);\n    });\n    //map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n    //return () => { map.current.remove()};\n  });\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"855806535\",\n      children: \".map-container.jsx-855806535{position:absolute;width:100%;height:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kcmFraS9Eb2N1bWVudHMvRXBpdGVjaC9FSVAvZGFzaGJvYXJkL2FkbWluL3BhZ2VzL2NvbnRyb2wvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa1M0QixBQUcyQyxrQkFDUCxXQUNDLFlBQ2hCIiwiZmlsZSI6Ii9Vc2Vycy9kcmFraS9Eb2N1bWVudHMvRXBpdGVjaC9FSVAvZGFzaGJvYXJkL2FkbWluL3BhZ2VzL2NvbnRyb2wvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgQVBJIGZyb20gJy4uLy4uL3NlcnZpY2VzL0FQSSc7XG5pbXBvcnQgbWFwYm94Z2wsIHsgYWNjZXNzVG9rZW4gfSBmcm9tIFwibWFwYm94LWdsXCI7XG5pbXBvcnQgVXNlckRhdGFTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9Vc2VyRGF0YVNlcnZpY2VcIjtcblxuaW1wb3J0ICdtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wuY3NzJztcbmltcG9ydCB7IEJ1dHRvbiwgTW9kYWwsIElucHV0IH0gZnJvbSAnYW50ZCc7XG5tYXBib3hnbC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWFHbGpZM1Z3TFhOMFlXWm1JaXdpWVNJNkltTnNhbmd4ZUhWa2J6QXlObXd6ZEhKNGNtSmlZV1ptTW00aWZRLnlJNDI1OWpsTXEyZWxEaVRfdUsxa2cnO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29udHJvbCAoYWNjZXNzX3Rva2VuLCB1c2VyX2RhdGEpIHtcbiAgICBjb25zdCBbbmV3bGF0LCBzZXRuZXdsYXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtuZXdsZ24sIHNldG5ld2xnbl0gPSAgdXNlU3RhdGUoMCk7XG4gICAgY29uc3QgW2FkZHJlc3MsIHNldGFkZHJlc3NdID0gIHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbcmVzdWx0cywgc2V0UmVzdWx0c10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgW3NlbGVjdGVkTWFya2VyLCBzZXRzZWxlY3RlZE1hcmtlcl0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW1RyYWlscywgc2V0VHJhaWxzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCBbbG5nTGF0U2VsZWN0ZWQsIHNldGxuZ0xhdFNlbGVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbbWFya2Vyc0xvYWRlZCwgc2V0TWFya2Vyc0xvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBbdXNlcm5hbWUsIHNldElucHV0VmFsdWVVc2VybmFtZV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW2VtYWlsLCBzZXRJbnB1dFZhbHVlRW1haWxdID0gdXNlU3RhdGUoJycpO1xuXG4gICAgY29uc3QgW2xuZywgc2V0TG5nXSA9IHVzZVN0YXRlKDIuMzUpO1xuICAgIGNvbnN0IFtsYXQsIHNldExhdF0gPSB1c2VTdGF0ZSg0OC44NSk7XG4gICAgY29uc3QgW3pvb20sIHNldFpvb21dID0gdXNlU3RhdGUoNSk7XG4gICAgY29uc3QgbWFwID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IHVzZVJlZihudWxsKTtcblxuICAgIGNvbnN0IFtpc01vZGFsT3Blbiwgc2V0SXNNb2RhbE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtpc01vZGFsT3BlblVwZGF0ZSwgc2V0SXNNb2RhbE9wZW5VcGRhdGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgY29uc3Qgc2hvd01vZGFVcGRhdGUgPSAoKSA9PiB7XG4gICAgICBzZXRJc01vZGFsT3BlblVwZGF0ZSh0cnVlKTtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGhhbmRsZU9rVXBkYXRlID0gKCkgPT4ge1xuICAgICAgc2V0SXNNb2RhbE9wZW5VcGRhdGUoZmFsc2UpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDYW5jZWxVcGRhdGUgPSAoKSA9PiB7XG4gICAgICBzZXRJc01vZGFsT3BlblVwZGF0ZShmYWxzZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNob3dNb2RhbCA9ICgpID0+IHtcbiAgICAgIHNldElzTW9kYWxPcGVuKHRydWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICBjb25zdCBmZXRjaFJlc3VsdHMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICAgIGBodHRwczovL2FwaS5tYXBib3guY29tL2dlb2NvZGluZy92NS9tYXBib3gucGxhY2VzLyR7YWRkcmVzc30uanNvbj9hY2Nlc3NfdG9rZW49JHttYXBib3hnbC5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgIHNldFJlc3VsdHMoZGF0YS5mZWF0dXJlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByZXN1bHRzOicsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICBmZXRjaFJlc3VsdHMoKTtcbiAgICAgICB9IFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0UmVzdWx0cyhbXSk7XG4gICAgICB9XG4gICAgICB1cGRhdGVNYXJrZXIoc2VsZWN0ZWRNYXJrZXIpO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUcmFpbHMoKSB7XG4gICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVzZXJfZGF0YSA9IFVzZXJEYXRhU2VydmljZS5nZXQoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyX2RhdGEpO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLmZldGNoVHJhaWxzKFwiUE9TVFwiLCAnL2FwaS90cmFpbC9yZXRyaWV2ZScsIHVzZXJfZGF0YSwgdHJ1ZSk7XG4gICAgICAgICAgICBsZXQgdHJhaWxzID0gcmVzcG9uc2UuZGF0YS50cmFpbHM7XG4gICAgICAgICAgICByZXR1cm4gdHJhaWxzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgVHJhaWxzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGdldE1hcmtlcihzZWxlY3RlZE1hcmtlcikge1xuICAgICAgY29uc29sZS5sb2coJ2dldE1hcmtlcicpO1xuICAgICAgbGV0IHRyYWlscyA9IGF3YWl0IGZldGNoVHJhaWxzKCk7XG4gICAgICBjb25zb2xlLmRpcih0cmFpbHMpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFpbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHRtcCA9IEpTT04ucGFyc2UodHJhaWxzW2ldLmdlb0pTT04pO1xuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWRNQXJrZXIgOicpO1xuICAgICAgICBjb25zb2xlLmRpcihzZWxlY3RlZE1hcmtlcik7XG4gICAgICAgIGlmICh0eXBlb2YgdG1wLmZlYXR1cmVzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdLmdlb21ldHJ5ICE9PSAndW5kZWZpbmVkJyAgJiYgdHlwZW9mIHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSAhPT0gJ3VuZGVmaW5lZCcpIHsgXG4gICAgICAgICAgaWYgKHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXSA9PT0gc2VsZWN0ZWRNYXJrZXIubG5nICYmIHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXVsxXSA9PT0gc2VsZWN0ZWRNYXJrZXIubGF0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCAgZmV0Y2hDb29yZGluYXRlcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgYGh0dHBzOi8vYXBpLm1hcGJveC5jb20vZ2VvY29kaW5nL3Y1L21hcGJveC5wbGFjZXMvJHthZGRyZXNzfS5qc29uP2FjY2Vzc190b2tlbj0ke21hcGJveGdsLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgKTtcbiAgXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgY29uc3QgW2xvbmdpdHVkZSwgbGF0aXR1ZGVdID0gZGF0YS5mZWF0dXJlc1swXS5jZW50ZXI7XG4gICAgICAgICAgc2V0bmV3bGF0KGxhdGl0dWRlKTtcbiAgICAgICAgICBzZXRuZXdsZ24obG9uZ2l0dWRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb29yZGluYXRlczonLCByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1hcmtlcihzZWxlY3RlZE1hcmtlcikge1xuICAgICAgbGV0IGluZGV4ID0gYXdhaXQgZ2V0TWFya2VyKHNlbGVjdGVkTWFya2VyKTtcbiAgICAgIGNvbnNvbGUuZGlyKGluZGV4KTtcbiAgICAgIGZldGNoQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGxldCBkYXRhID0ge307XG4gICAgICBsZXQgdHJhaWxzID0gYXdhaXQgZmV0Y2hUcmFpbHModXNlcl9kYXRhKTtcbiAgICAgIGxldCB0bXAgPSBKU09OLnBhcnNlKHRyYWlsc1tpbmRleF0uZ2VvSlNPTik7XG4gICAgICBjb25zb2xlLmxvZygndG1wOicpO1xuICAgICAgY29uc29sZS5kaXIodG1wKTtcbiAgICAgIGRhdGEuaWQgPSB0cmFpbHNbaW5kZXhdLmlkO1xuICAgICAgZGF0YS5sYXRpdHVkZSA9IHBhcnNlSW50KG5ld2xhdCk7XG4gICAgICBkYXRhLmxvbmdpdHVkZSA9IHBhcnNlSW50KG5ld2xnbik7XG4gICAgICBjb25zb2xlLmxvZyh0eXBlb2YgdG1wLmZlYXR1cmVzWzBdKTtcbiAgICAgIC8vaWYgKHR5cGVvZiB0bXAuZmVhdHVyZXNbMF0gIT09ICd1bmRlZmluZWQnICYmIHRtcC5mZWF0dXJlc1swXS5nZW9tZXRyeSA9PSEgJ3VuZGVmaW5lZCcgICYmIHR5cGVvZiB0bXAuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMgIT09ICd1bmRlZmluZWQnKSB7IFxuICAgICAgICB0bXAuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0gPSBwYXJzZUludChuZXdsZ24pO1xuICAgICAgICB0bXAuZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMV0gPSBwYXJzZUludChuZXdsYXQpO1xuICAgICAgLy99XG4gICAgICBjb25zb2xlLmxvZygndG1wJyk7XG4gICAgICBjb25zb2xlLmRpcih0bXApO1xuICAgICAgZGF0YS5nZW9KU09OID0gSlNPTi5zdHJpbmdpZnkodG1wKTtcbiAgICAgIGNvbnNvbGUubG9nKCdoZXJlJyk7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIGNvbnN0IHVzZXJfZGF0YSA9IFVzZXJEYXRhU2VydmljZS5nZXQoKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLkNyZWF0ZU1hcmtlcignUFVUJywgJy9hcGkvdHJhaWwvdXBkYXRlJywgdXNlcl9kYXRhLCBkYXRhLCB0cnVlKTtcbiAgICAgIGxldCByZXN1bHQgPSByZXNwb25zZS5kYXRhLnRyYWlscztcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICBzZXRJc01vZGFsT3BlblVwZGF0ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlT2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyX2RhdGEgPSBVc2VyRGF0YVNlcnZpY2UuZ2V0KCk7XG4gICAgICAgIGxldCB0cmFpbCA9IHt9O1xuICAgICAgICB0cmFpbC5uYW1lID0gXCJBZGRlZCBieSBhZG1pbiBpbiBkYXNoYm9hcmRcIjtcbiAgICAgICAgdHJhaWwuYWRkcmVzcyA9IFwiQWRkZWQgYnkgYWRtaW4gaW4gZGFzaGJvYXJkXCI7XG4gICAgICAgIHRyYWlsLmRlc2NyaXB0aW9uID0gXCJBZGRlZCBieSBhZG1pbiBpbiBkYXNoYm9hcmRcIjtcbiAgICAgICAgdHJhaWwucGljdHVyZXMgPSBbXCJodHRwczovL2dvb2dsZS5jb21cIl07XG4gICAgICAgIHRyYWlsLmxhdGl0dWRlID0gbG5nTGF0U2VsZWN0ZWQubGF0O1xuICAgICAgICB0cmFpbC5sb25naXR1ZGUgPSBsbmdMYXRTZWxlY3RlZC5sbmc7XG4gICAgICAgIHRyYWlsLmRpZmZpY3VsdHkgPSAwO1xuICAgICAgICB0cmFpbC5kdXJhdGlvbiA9IDA7XG4gICAgICAgIHRyYWlsLmRpc3RhbmNlID0gMDtcbiAgICAgICAgdHJhaWwudXBoaWxsID0gMDtcbiAgICAgICAgdHJhaWwuZG93bmhpbGwgPSAwO1xuICAgICAgICB0cmFpbC50b29scyA9IFtdO1xuICAgICAgICB0cmFpbC5yZWxhdGVkQXJ0aWNsZXMgPSBbXTtcbiAgICAgICAgdHJhaWwubGFiZWxzID0gW107XG4gICAgICAgIGxldCBnZW9qc29uID0ge1xuICAgICAgICAgIGZlYXR1cmVzOiBbe1xuICAgICAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgICAgICBjb29yZGluYXRlczogW1tcbiAgICAgICAgICAgICAgICBsbmdMYXRTZWxlY3RlZC5sbmcsXG4gICAgICAgICAgICAgICAgbG5nTGF0U2VsZWN0ZWQubGF0XG4gICAgICAgICAgICAgIF1dfX1dfVxuICAgICAgICB0cmFpbC5nZW9KU09OID0gSlNPTi5zdHJpbmdpZnkoZ2VvanNvbik7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLkNyZWF0ZU1hcmtlcignUE9TVCcsICcvYXBpL3RyYWlsL2NyZWF0ZScsIHVzZXJfZGF0YSwgdHJhaWwsIHRydWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIHNldElzTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgc2V0SXNNb2RhbE9wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgICAgc2V0SXNNb2RhbE9wZW4oZmFsc2UpO1xuICAgIH07XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyX2RhdGEgPSBVc2VyRGF0YVNlcnZpY2UuZ2V0KCk7XG4gICAgICAgIGxvYWRNYXJrZXIoKTtcbiAgICAgICAgaWYgKG1hcC5jdXJyZW50ICYmIG1hcmtlcnNMb2FkZWQgPT0gdHJ1ZSApIHJldHVybjsgLy8gaW5pdGlhbGl6ZSBtYXAgb25seSBvbmNlXG4gICAgICAgIG1hcC5jdXJyZW50ID0gbmV3IG1hcGJveGdsLk1hcCh7XG4gICAgICAgIGNvbnRhaW5lcjogbWFwQ29udGFpbmVyLmN1cnJlbnQsXG4gICAgICAgIHN0eWxlOiAnbWFwYm94Oi8vc3R5bGVzL21hcGJveC9zdHJlZXRzLXYxMicsXG4gICAgICAgIGNlbnRlcjogW2xuZywgbGF0XSxcbiAgICAgICAgem9vbTogem9vbVxuICAgICAgICB9KTtcbiAgICAgICAgbWFwLmN1cnJlbnQuYWRkQ29udHJvbChuZXcgbWFwYm94Z2wuTmF2aWdhdGlvbkNvbnRyb2woKSwgJ3RvcC1yaWdodCcpO1xuICAgICAgICBtYXAuY3VycmVudC5hZGRDb250cm9sKFxuICAgICAgICAgIG5ldyBtYXBib3hnbC5HZW9sb2NhdGVDb250cm9sKHtcbiAgICAgICAgICAgIHBvc2l0aW9uT3B0aW9uczoge1xuICAgICAgICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmFja1VzZXJMb2NhdGlvbjogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hHZW9KU09OKCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgY29uc3QgdXNlcl9kYXRhMiA9IFVzZXJEYXRhU2VydmljZS5nZXQoKTtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuc2VuZCgnUE9TVCcsIFwiL2FwaS90cmFpbC9yZXRyaWV2ZVwiLCB1c2VyX2RhdGEyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBsZXQgdHJhaWxzID0gcmVzcG9uc2UuZGF0YS50cmFpbHM7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJhaWxzKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdHJhaWxzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgbGV0IHRtcCA9IEpTT04ucGFyc2UoaXRlbS5nZW9KU09OKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRtcCk7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRtcC5mZWF0dXJlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRtcC5mZWF0dXJlc1swXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRtcC5mZWF0dXJlc1swXSAhPT0gICd1bmRlZmluZWQnICAmJiB0eXBlb2YgdG1wLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdICE9PSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godG1wLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vcmVzdWx0LnB1c2godG1wLmZlYXR1cmVzLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEdlb0pTT046JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGlzTWFya2VyUHJlc2VudCgpIHtcbiAgICAgICAgICAvLyBDaGVjayBzb21lIGNvbmRpdGlvbiwgZGF0YSwgb3IgZXZlbnQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBtYXJrZXIgaXMgcHJlc2VudFxuICAgICAgICAgIC8vIFJldHVybiB0cnVlIGlmIHRoZSBtYXJrZXIgaXMgcHJlc2VudCwgZmFsc2UgaWYgbm90XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkTWFya2VyKCkge1xuICAgICAgICAgIGxldCBtYXJrZXJzID0gYXdhaXQgZmV0Y2hHZW9KU09OKHVzZXJfZGF0YSk7XG4gICAgICAgICAgbGV0IGdlb2pzb24gPSB7XG4gICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICBmZWF0dXJlczogbWFya2Vycz8ubWFwKChtYXJrZXIpID0+ICh7XG4gICAgICAgICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlczoge1xuICAgICAgICAgICAgICAgICAgbGF0OiBtYXJrZXJbMV0sXG4gICAgICAgICAgICAgICAgICBsbmc6IG1hcmtlclswXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBtYXAuY3VycmVudC5vbignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIGdlb2pzb24/LmZlYXR1cmVzPy5mb3JFYWNoKChtYXJrZXIpID0+IHsgIC8vIGNyZWF0ZSBhIERPTSBlbGVtZW50IGZvciB0aGUgbWFya2VyXG4gICAgICAgICAgICBjb25zdCBtYXJrZXJJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBtYXJrZXJJY29uLmNsYXNzTmFtZSA9ICdsb2NhdGlvbi1tYXJrZXInO1xuICAgICAgICAgICAgbWFya2VySWNvbi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKC9jdXN0b20tbWFya2VyLnBuZyknO1xuICAgICAgICAgICAgbWFya2VySWNvbi5zdHlsZS53aWR0aCA9ICAnNjBweCc7XG4gICAgICAgICAgICBtYXJrZXJJY29uLnN0eWxlLmhlaWdodCA9ICc5MHB4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3IG1hcGJveGdsLk1hcmtlcihtYXJrZXJJY29uKVxuICAgICAgICAgICAgICAuc2V0TG5nTGF0KG1hcmtlci5nZW9tZXRyeS5jb29yZGluYXRlcylcbiAgICAgICAgICAgICAgLmFkZFRvKG1hcC5jdXJyZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICBtYXJrZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGlyKCdtYXJrZXIgOicgKyBKU09OLnN0cmluZ2lmeShtYXJrZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpKTtcbiAgICAgICAgICAgICAgICBzZXRzZWxlY3RlZE1hcmtlcihtYXJrZXIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgIHNldElzTW9kYWxPcGVuVXBkYXRlKHRydWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldE1hcmtlcnNMb2FkZWQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbWFwLmN1cnJlbnQub24oJ2NvbnRleHRtZW51JywgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc3QgbG5nTGF0ID0gZS5sbmdMYXQ7XG4gICAgICAgICAgc2V0bG5nTGF0U2VsZWN0ZWQobG5nTGF0KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUmlnaHQtY2xpY2tlZCBhdDonLCBsbmdMYXQpO1xuICAgICAgICAgIHNldElzTW9kYWxPcGVuKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAvL21hcC5jdXJyZW50LmFkZENvbnRyb2wobmV3IG1hcGJveGdsLk5hdmlnYXRpb25Db250cm9sKCksIFwidG9wLXJpZ2h0XCIpO1xuICAgICAgICAgIC8vcmV0dXJuICgpID0+IHsgbWFwLmN1cnJlbnQucmVtb3ZlKCl9O1xuICAgICAgfSk7XG4gICAgICBcbiAgICByZXR1cm4gKFxuICAgICAgICA8TGF5b3V0PlxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAgICAgICAgICAgLm1hcC1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj17bWFwQ29udGFpbmVyfSBjbGFzc05hbWU9XCJtYXAtY29udGFpbmVyXCIvPlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWwgdGl0bGU9XCJBam91dCBkZSBtYXJxdWV1clwiIG9wZW49e2lzTW9kYWxPcGVufSBvbk9rPXtoYW5kbGVPa30gb25DYW5jZWw9e2hhbmRsZUNhbmNlbH0+XG4gICAgICAgICAgICAgICAgICAgIDxwPlZvdWxleiB2b3VzIGFqb3V0ZXIgdW4gbWFycXVldXIgw6AgbCdlbXBsYWNlbWVudCA6IDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+bG9uZ2l0dWRlIDoge2xuZ0xhdFNlbGVjdGVkLmxuZ30gPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5sYXRpdHVkZToge2xuZ0xhdFNlbGVjdGVkLmxhdH08L3A+XG4gICAgICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgICAgICAgPE1vZGFsIHRpdGxlPVwiTW9kaWZpY2F0aW9uIGR1IG1hcnF1ZXVyXCIgb3Blbj17aXNNb2RhbE9wZW5VcGRhdGV9IG9uT2s9e2hhbmRsZU9rVXBkYXRlfSBvbkNhbmNlbD17aGFuZGxlQ2FuY2VsVXBkYXRlfT5cbiAgICAgICAgICAgICAgICAgICAgPHA+QWRkcmVzc2UgOiA8L3A+IDwgSW5wdXQgcGxhY2Vob2xkZXI9XCJBZGRyZXNzZVwiIHZhbHVlPXthZGRyZXNzfSBvbkNoYW5nZT17ZSA9PiB7IHNldGFkZHJlc3MoZS5jdXJyZW50VGFyZ2V0LnZhbHVlKTsgfX0vPlxuICAgICAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICAgICAge3Jlc3VsdHMubWFwKChyZXN1bHRTZWFyY2gsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGxpIGtleT17aW5kZXh9PntyZXN1bHQucGxhY2VfbmFtZX08L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICA8cD48L3A+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24ga2V5PVwic3VibWl0XCIgdHlwZT1cInByaW1hcnlcIiBvbkNsaWNrPXtoYW5kbGVTdWJtaXR9PlxuICAgICAgICAgICAgICAgICAgICAgIFN1Ym1pdFxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgPC9MYXlvdXQ+XG4gICAgKTtcbn0iXX0= */\\n/*@ sourceURL=/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js */\"\n    }, void 0, false, void 0, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      className: \"jsx-855806535\" + \" \" + \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ajout de marqueur\",\n      open: isModalOpen,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: \"Voulez vous ajouter un marqueur \\xE0 l'emplacement : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: [\"longitude : \", lngLatSelected.lng, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: [\"latitude: \", lngLatSelected.lat]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Modification du marqueur\",\n      open: isModalOpenUpdate,\n      onOk: handleOkUpdate,\n      onCancel: handleCancelUpdate,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\",\n        children: \"Addresse : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 21\n      }, this), \" \", /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Addresse\",\n        value: address,\n        onChange: e => {\n          setaddress(e.currentTarget.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"jsx-855806535\",\n        children: results.map((resultSearch, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"jsx-855806535\",\n          children: result.place_name\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 23\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-855806535\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleSubmit,\n        children: \"Submit\"\n      }, \"submit\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 290,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"names":["React","useRef","useEffect","useState","Layout","API","mapboxgl","accessToken","UserDataService","Button","Modal","Input","jsxDEV","_jsxDEV","Control","access_token","user_data","newlat","setnewlat","newlgn","setnewlgn","address","setaddress","input","setInput","results","setResults","selectedMarker","setselectedMarker","Trails","setTrails","lngLatSelected","setlngLatSelected","markersLoaded","setMarkersLoaded","username","setInputValueUsername","email","setInputValueEmail","lng","setLng","lat","setLat","zoom","setZoom","map","mapContainer","isModalOpen","setIsModalOpen","isModalOpenUpdate","setIsModalOpenUpdate","showModaUpdate","handleOkUpdate","handleCancelUpdate","showModal","handleSubmit","fetchResults","response","fetch","ok","data","json","features","console","error","statusText","updateMarker","fetchTrails","get","log","trails","getMarker","dir","i","length","tmp","JSON","parse","geoJSON","geometry","coordinates","fetchCoordinates","longitude","latitude","center","index","id","parseInt","stringify","CreateMarker","result","handleOk","trail","name","description","pictures","difficulty","duration","distance","uphill","downhill","tools","relatedArticles","labels","geojson","type","properties","handleCancel","loadMarker","current","Map","container","style","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","fetchGeoJSON","user_data2","send","item","push","isMarkerPresent","markers","marker","on","_geojson$features","forEach","markerIcon","document","createElement","className","backgroundImage","width","height","Marker","setLngLat","addTo","addEventListener","e","preventDefault","lngLat","children","_JSXStyle","ref","fileName","_jsxFileName","lineNumber","columnNumber","title","open","onOk","onCancel","placeholder","value","onChange","currentTarget","resultSearch","place_name","onClick"],"sources":["/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/control/index.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport Layout from '../../components/Layout';\nimport API from '../../services/API';\nimport mapboxgl, { accessToken } from \"mapbox-gl\";\nimport UserDataService from \"../../services/UserDataService\";\n\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { Button, Modal, Input } from 'antd';\nmapboxgl.accessToken = 'pk.eyJ1IjoiaGljY3VwLXN0YWZmIiwiYSI6ImNsangxeHVkbzAyNmwzdHJ4cmJiYWZmMm4ifQ.yI4259jlMq2elDiT_uK1kg';\n\n\n\nexport default function Control (access_token, user_data) {\n    const [newlat, setnewlat] = useState(false);\n    const [newlgn, setnewlgn] =  useState(0);\n    const [address, setaddress] =  useState('');\n    const [input, setInput] = useState('');\n    const [results, setResults] = useState([]);\n    const [selectedMarker, setselectedMarker] = useState('');\n    const [Trails, setTrails] = useState([]);\n    const [lngLatSelected, setlngLatSelected] = useState(false);\n    const [markersLoaded, setMarkersLoaded] = useState(false);\n\n    const [username, setInputValueUsername] = useState('');\n    const [email, setInputValueEmail] = useState('');\n\n    const [lng, setLng] = useState(2.35);\n    const [lat, setLat] = useState(48.85);\n    const [zoom, setZoom] = useState(5);\n    const map = useRef(null);\n    const mapContainer = useRef(null);\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [isModalOpenUpdate, setIsModalOpenUpdate] = useState(false);\n\n    const showModaUpdate = () => {\n      setIsModalOpenUpdate(true);\n    };\n    \n    const handleOkUpdate = () => {\n      setIsModalOpenUpdate(false);\n    };\n\n    const handleCancelUpdate = () => {\n      setIsModalOpenUpdate(false);\n    };\n\n    const showModal = () => {\n      setIsModalOpen(true);\n    };\n\n    const handleSubmit = async () => {\n      if (address) {\n        const fetchResults = async () => {\n          try {\n            const response = await fetch(\n              `https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?access_token=${mapboxgl.accessToken}`\n            );\n            if (response.ok) {\n              const data = await response.json();\n              setResults(data.features);\n            } else {\n              console.error('Error fetching results:', response.statusText);\n            }\n          } catch (error) {\n            console.error('Error:', error);\n          }\n        fetchResults();\n       } \n      } else {\n        setResults([]);\n      }\n      updateMarker(selectedMarker);\n    }\n\n\n    async function fetchTrails() {\n      try {\n          const user_data = UserDataService.get();\n          console.log(user_data);\n          const response = await API.fetchTrails(\"POST\", '/api/trail/retrieve', user_data, true);\n            let trails = response.data.trails;\n            return trails;\n        } catch (error) {\n            console.error('Error fetching Trails:', error);\n        }\n    }\n\n    async function getMarker(selectedMarker) {\n      console.log('getMarker');\n      let trails = await fetchTrails();\n      console.dir(trails);\n      for (var i = 0; i < trails.length; i++) {\n        let tmp = JSON.parse(trails[i].geoJSON);\n        console.log('selectedMArker :');\n        console.dir(selectedMarker);\n        if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0].geometry !== 'undefined'  && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined') { \n          if (tmp.features[0].geometry.coordinates[0][0] === selectedMarker.lng && tmp.features[0].geometry.coordinates[0][1] === selectedMarker.lat) {\n            return i;\n          }\n        }\n      }\n    }\n\n    const  fetchCoordinates = async () => {\n      try {\n        const response = await fetch(\n          `https://api.mapbox.com/geocoding/v5/mapbox.places/${address}.json?access_token=${mapboxgl.accessToken}`\n        );\n  \n        if (response.ok) {\n          const data = await response.json();\n          const [longitude, latitude] = data.features[0].center;\n          setnewlat(latitude);\n          setnewlgn(longitude);\n        } else {\n          console.error('Error fetching coordinates:', response.statusText);\n        }\n      } catch (error) {\n        console.error('Error:', error);\n      }\n    }\n\n    async function updateMarker(selectedMarker) {\n      let index = await getMarker(selectedMarker);\n      console.dir(index);\n      fetchCoordinates();\n      let data = {};\n      let trails = await fetchTrails(user_data);\n      let tmp = JSON.parse(trails[index].geoJSON);\n      console.log('tmp:');\n      console.dir(tmp);\n      data.id = trails[index].id;\n      data.latitude = parseInt(newlat);\n      data.longitude = parseInt(newlgn);\n      console.log(typeof tmp.features[0]);\n      //if (typeof tmp.features[0] !== 'undefined' && tmp.features[0].geometry ==! 'undefined'  && typeof tmp.features[0].geometry.coordinates !== 'undefined') { \n        tmp.features[0].geometry.coordinates[0][0] = parseInt(newlgn);\n        tmp.features[0].geometry.coordinates[0][1] = parseInt(newlat);\n      //}\n      console.log('tmp');\n      console.dir(tmp);\n      data.geoJSON = JSON.stringify(tmp);\n      console.log('here');\n      console.log(data);\n      const user_data = UserDataService.get();\n      const response = await API.CreateMarker('PUT', '/api/trail/update', user_data, data, true);\n      let result = response.data.trails;\n      console.log(result);\n      setIsModalOpenUpdate(false);\n    }\n\n    const handleOk = async () => {\n      try {\n        const user_data = UserDataService.get();\n        let trail = {};\n        trail.name = \"Added by admin in dashboard\";\n        trail.address = \"Added by admin in dashboard\";\n        trail.description = \"Added by admin in dashboard\";\n        trail.pictures = [\"https://google.com\"];\n        trail.latitude = lngLatSelected.lat;\n        trail.longitude = lngLatSelected.lng;\n        trail.difficulty = 0;\n        trail.duration = 0;\n        trail.distance = 0;\n        trail.uphill = 0;\n        trail.downhill = 0;\n        trail.tools = [];\n        trail.relatedArticles = [];\n        trail.labels = [];\n        let geojson = {\n          features: [{\n            type: 'Feature',\n            properties: {},\n            geometry: {\n              type: 'Point',\n              coordinates: [[\n                lngLatSelected.lng,\n                lngLatSelected.lat\n              ]]}}]}\n        trail.geoJSON = JSON.stringify(geojson);\n        const response = await API.CreateMarker('POST', '/api/trail/create', user_data, trail, true);\n        console.log(response);\n        setIsModalOpen(false);\n      } catch (error) {\n        console.log(error);\n        setIsModalOpen(false);\n      }\n    };\n    const handleCancel = () => {\n      setIsModalOpen(false);\n    };\n\n    useEffect(() => {\n        const user_data = UserDataService.get();\n        loadMarker();\n        if (map.current && markersLoaded == true ) return; // initialize map only once\n        map.current = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/streets-v12',\n        center: [lng, lat],\n        zoom: zoom\n        });\n        map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\n        map.current.addControl(\n          new mapboxgl.GeolocateControl({\n            positionOptions: {\n              enableHighAccuracy: true\n            },\n            trackUserLocation: true\n          })\n        );\n\n        async function fetchGeoJSON() {\n          try {\n              let result = [];\n              const user_data2 = UserDataService.get();\n              const response = await API.send('POST', \"/api/trail/retrieve\", user_data2, true);\n                let trails = response.data.trails;\n                console.log(trails);\n                console.log(response);\n                trails.map((item) => {\n                  let tmp = JSON.parse(item.geoJSON);\n                  console.log(tmp);\n                  if (typeof tmp.features !== 'undefined' && typeof tmp.features[0] !== 'undefined' && typeof tmp.features[0] !==  'undefined'  && typeof tmp.features[0].geometry.coordinates[0] !== 'undefined' ) {\n                    result.push(tmp.features[0].geometry.coordinates[0]);\n                  } else {\n                    //result.push(tmp.features.geometry.coordinates);\n                  }\n                });\n                console.log(result);\n                return result;\n            } catch (error) {\n                console.error('Error fetching GeoJSON:', error);\n            }\n        }\n        function isMarkerPresent() {\n          // Check some condition, data, or event to determine if the marker is present\n          // Return true if the marker is present, false if not\n          return true;\n        }\n\n        async function loadMarker() {\n          let markers = await fetchGeoJSON(user_data);\n          let geojson = {\n            type: 'Feature',\n            features: markers?.map((marker) => ({\n              geometry: {\n                type: 'Point',\n                coordinates: {\n                  lat: marker[1],\n                  lng: marker[0]\n                }\n              }\n            }))\n          };\n          map.current.on('load', () => {\n            geojson?.features?.forEach((marker) => {  // create a DOM element for the marker\n            const markerIcon = document.createElement('div');\n            markerIcon.className = 'location-marker';\n            markerIcon.style.backgroundImage = 'url(/custom-marker.png)';\n            markerIcon.style.width =  '60px';\n            markerIcon.style.height = '90px';\n            \n            new mapboxgl.Marker(markerIcon)\n              .setLngLat(marker.geometry.coordinates)\n              .addTo(map.current);\n            \n              markerIcon.addEventListener('click', () => {\n                console.dir('marker :' + JSON.stringify(marker.geometry.coordinates));\n                setselectedMarker(marker.geometry.coordinates);\n                setIsModalOpenUpdate(true);\n              });\n            });\n          });\n          setMarkersLoaded(true);\n        }\n        map.current.on('contextmenu', (e) => {\n          e.preventDefault();\n          const lngLat = e.lngLat;\n          setlngLatSelected(lngLat);\n          console.log('Right-clicked at:', lngLat);\n          setIsModalOpen(true);\n        });\n          //map.current.addControl(new mapboxgl.NavigationControl(), \"top-right\");\n          //return () => { map.current.remove()};\n      });\n      \n    return (\n        <Layout>\n                <style jsx>{`\n                    .map-container {\n                        position: absolute;\n                        width: 100%;\n                        height: 100%;\n                    }\n                    `}</style>\n                    <div ref={mapContainer} className=\"map-container\"/>\n                    <Modal title=\"Ajout de marqueur\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}>\n                    <p>Voulez vous ajouter un marqueur à l'emplacement : </p>\n                    <p>longitude : {lngLatSelected.lng} </p>\n                    <p>latitude: {lngLatSelected.lat}</p>\n                  </Modal>\n                  <Modal title=\"Modification du marqueur\" open={isModalOpenUpdate} onOk={handleOkUpdate} onCancel={handleCancelUpdate}>\n                    <p>Addresse : </p> < Input placeholder=\"Addresse\" value={address} onChange={e => { setaddress(e.currentTarget.value); }}/>\n                    <ul>\n                      {results.map((resultSearch, index) => (\n                      <li key={index}>{result.place_name}</li>\n                      ))}\n                    </ul>\n                    <p></p>\n                    <Button key=\"submit\" type=\"primary\" onClick={handleSubmit}>\n                      Submit\n                    </Button>\n                    </Modal>\n        </Layout>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}