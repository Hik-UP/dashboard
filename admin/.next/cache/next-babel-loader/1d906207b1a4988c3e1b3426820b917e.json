{"ast":null,"code":"import AccessTokenService from \"./AccessTokenService\";\nimport Router from \"next/router\";\nclass API {\n  getDomain() {\n    return process.env.NEXT_PUBLIC_API_URL;\n  }\n  getApiDomain() {\n    return this.getDomain();\n  }\n  async send(method, route, data = null, auth = true) {\n    // let api = this.getApiDomain();\n    console.log(route);\n    let headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    };\n    if (auth) {\n      let accessToken = AccessTokenService.get();\n      accessToken = accessToken ? accessToken : '';\n      if (accessToken) headers['Authorization'] = 'Bearer ' + accessToken;\n    }\n    if (method !== \"GET\" && data) data = JSON.stringify(data);else data = null;\n    try {\n      let response = await fetch(process.env.NEXT_PUBLIC_API_URL + route, {\n        headers: headers,\n        method: method,\n        body: data\n      });\n      if (response.status === 401) {\n        AccessTokenService.remove();\n        return {\n          data: null,\n          status: -1\n        };\n      }\n      return {\n        data: await response.json(),\n        status: response.status\n      };\n    } catch (e) {\n      await Router.push('/');\n      return {\n        data: null,\n        status: -1\n      };\n    }\n  }\n}\nconst service = new API();\nexport default service;","map":{"version":3,"names":["AccessTokenService","Router","API","getDomain","process","env","NEXT_PUBLIC_API_URL","getApiDomain","send","method","route","data","auth","console","log","headers","accessToken","get","JSON","stringify","response","fetch","body","status","remove","json","e","push","service"],"sources":["/Users/draki/Documents/Epitech/EIP/admin/services/API.js"],"sourcesContent":["import AccessTokenService from \"./AccessTokenService\";\nimport Router from \"next/router\";\n\nclass API {\n    getDomain() {\n        return process.env.NEXT_PUBLIC_API_URL;\n    }\n\n    getApiDomain() {\n        return this.getDomain();\n    }\n\n    async send(method, route, data = null, auth = true) {\n       // let api = this.getApiDomain();\n        console.log(route);\n        let headers = {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        };\n        if (auth) {\n            let accessToken = AccessTokenService.get();\n            accessToken = accessToken ? accessToken : '';\n            if (accessToken)\n                headers['Authorization'] = 'Bearer ' + accessToken;\n        }\n\n        if (method !== \"GET\" && data)\n            data = JSON.stringify(data);\n        else\n            data = null;\n\n        try {\n\n        let response = await fetch(process.env.NEXT_PUBLIC_API_URL + route, {\n                headers: headers,\n                method: method,\n                body: data,\n            }); \n\n            if (response.status === 401) {\n                AccessTokenService.remove();\n                return {\n                    data: null,\n                    status: -1,\n                };\n            }\n\n            return {\n                data: await response.json(),\n                status: response.status,\n            };\n        } catch (e) {\n            await Router.push('/');\n            return {\n                data: null,\n                status: -1,\n            };\n        }\n    }\n}\n\nconst service = new API();\nexport default service;\n"],"mappings":"AAAA,OAAOA,kBAAkB,MAAM,sBAAsB;AACrD,OAAOC,MAAM,MAAM,aAAa;AAEhC,MAAMC,GAAG,CAAC;EACNC,SAASA,CAAA,EAAG;IACR,OAAOC,OAAO,CAACC,GAAG,CAACC,mBAAmB;EAC1C;EAEAC,YAAYA,CAAA,EAAG;IACX,OAAO,IAAI,CAACJ,SAAS,CAAC,CAAC;EAC3B;EAEA,MAAMK,IAAIA,CAACC,MAAM,EAAEC,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,IAAI,GAAG,IAAI,EAAE;IACjD;IACCC,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;IAClB,IAAIK,OAAO,GAAG;MACV,QAAQ,EAAE,kBAAkB;MAC5B,cAAc,EAAE;IACpB,CAAC;IACD,IAAIH,IAAI,EAAE;MACN,IAAII,WAAW,GAAGhB,kBAAkB,CAACiB,GAAG,CAAC,CAAC;MAC1CD,WAAW,GAAGA,WAAW,GAAGA,WAAW,GAAG,EAAE;MAC5C,IAAIA,WAAW,EACXD,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGC,WAAW;IAC1D;IAEA,IAAIP,MAAM,KAAK,KAAK,IAAIE,IAAI,EACxBA,IAAI,GAAGO,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CAAC,KAE5BA,IAAI,GAAG,IAAI;IAEf,IAAI;MAEJ,IAAIS,QAAQ,GAAG,MAAMC,KAAK,CAACjB,OAAO,CAACC,GAAG,CAACC,mBAAmB,GAAGI,KAAK,EAAE;QAC5DK,OAAO,EAAEA,OAAO;QAChBN,MAAM,EAAEA,MAAM;QACda,IAAI,EAAEX;MACV,CAAC,CAAC;MAEF,IAAIS,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;QACzBvB,kBAAkB,CAACwB,MAAM,CAAC,CAAC;QAC3B,OAAO;UACHb,IAAI,EAAE,IAAI;UACVY,MAAM,EAAE,CAAC;QACb,CAAC;MACL;MAEA,OAAO;QACHZ,IAAI,EAAE,MAAMS,QAAQ,CAACK,IAAI,CAAC,CAAC;QAC3BF,MAAM,EAAEH,QAAQ,CAACG;MACrB,CAAC;IACL,CAAC,CAAC,OAAOG,CAAC,EAAE;MACR,MAAMzB,MAAM,CAAC0B,IAAI,CAAC,GAAG,CAAC;MACtB,OAAO;QACHhB,IAAI,EAAE,IAAI;QACVY,MAAM,EAAE,CAAC;MACb,CAAC;IACL;EACJ;AACJ;AAEA,MAAMK,OAAO,GAAG,IAAI1B,GAAG,CAAC,CAAC;AACzB,eAAe0B,OAAO"},"metadata":{},"sourceType":"module"}