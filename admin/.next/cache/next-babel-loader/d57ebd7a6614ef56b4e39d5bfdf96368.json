{"ast":null,"code":"var _jsxFileName = \"/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport Router from 'next/router';\nimport { Card, Alert, Input, Button, Layout } from 'antd';\nimport API from '../services/API';\nimport AccessTokenService from \"../services/AccessTokenService\";\nimport UserDataService from \"../services/UserDataService\";\nimport bg from '';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  useEffect(() => {\n    const token = AccessTokenService.get();\n    if (token) Router.push('/control');\n  });\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const submit = async () => {\n    const data = {\n      email,\n      password\n    };\n    setError(null);\n    setLoading(true);\n    const response = await API.send('POST', '/api/auth/login', data, false);\n    //const rslt = JSON.parse(response);\n    setLoading(false);\n    if (response.status === 200) {\n      //  if (response.data.user.roles[0] == \"ADMIN\") {\n      console.log(response.data.user.roles[0]);\n      AccessTokenService.set(response.data.user.token);\n      UserDataService.set(response.data.user);\n      await Router.push('/control');\n      // } else {\n      //     setError(\"Non Admin Users\");\n      // }\n    } else if (response.status === 401) setError(\"Bad credentials\");else setError(\"An error occurred\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundImage: \"/background.png\",\n      height: \"100vh\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundSize: \"cover\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      style: {\n        height: \"100vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          width: 400,\n          backgroundColor: \"#fff\",\n          margin: \"auto\",\n          textAlign: \"center\"\n        },\n        children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n          style: {\n            marginBottom: 30\n          },\n          message: error,\n          type: \"error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Email\",\n          value: email,\n          onChange: event => setEmail(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          style: {\n            marginTop: 15\n          },\n          placeholder: \"Password\",\n          value: password,\n          type: \"password\",\n          onChange: event => setPassword(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: submit,\n          loading: loading,\n          style: {\n            marginTop: 20\n          },\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\nexport default Login;","map":{"version":3,"names":["React","useEffect","useState","Router","Card","Alert","Input","Button","Layout","API","AccessTokenService","UserDataService","bg","jsxDEV","_jsxDEV","Login","token","get","push","email","setEmail","password","setPassword","loading","setLoading","error","setError","submit","data","response","send","status","console","log","user","roles","set","style","backgroundImage","height","backgroundRepeat","backgroundSize","children","width","backgroundColor","margin","textAlign","marginBottom","message","type","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","event","target","marginTop","onClick"],"sources":["/Users/draki/Documents/Epitech/EIP/dashboard/admin/pages/index.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Router from 'next/router';\nimport {Card, Alert, Input, Button, Layout} from 'antd';\nimport API from '../services/API';\nimport AccessTokenService from \"../services/AccessTokenService\";\nimport UserDataService from \"../services/UserDataService\";\nimport bg from ''\nconst Login = () => {\n    useEffect(() => {\n        const token = AccessTokenService.get();\n        if (token)\n            Router.push('/control');\n    });\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const submit = async () => {\n        const data = {\n            email,\n            password,\n        }\n        setError(null);\n        setLoading(true);\n        const response = await API.send('POST', '/api/auth/login', data, false);\n        //const rslt = JSON.parse(response);\n        setLoading(false);\n        if (response.status === 200) {\n          //  if (response.data.user.roles[0] == \"ADMIN\") {\n                console.log(response.data.user.roles[0]);\n                AccessTokenService.set(response.data.user.token);\n                UserDataService.set(response.data.user);\n                await Router.push('/control');\n           // } else {\n           //     setError(\"Non Admin Users\");\n           // }\n        } else if (response.status === 401)\n            setError(\"Bad credentials\");\n        else\n            setError(\"An error occurred\");\n    }\n\n    return (\n        <div style={{\n            backgroundImage: \"/background.png\",\n            height: \"100vh\",\n            backgroundRepeat: \"no-repeat\",\n            backgroundSize: \"cover\",\n        }}>\n        <Layout style={{height: \"100vh\"}}>\n            <Card style={{width: 400, backgroundColor: \"#fff\", margin: \"auto\", textAlign: \"center\"}}>\n                {error && (\n                    <Alert style={{marginBottom: 30}} message={error} type=\"error\" />\n                )}\n                <Input\n                    placeholder={\"Email\"}\n                    value={email}\n                    onChange={(event) => setEmail(event.target.value)}\n                />\n                <Input\n                    style={{marginTop: 15}}\n                    placeholder={\"Password\"}\n                    value={password}\n                    type={\"password\"}\n                    onChange={(event) => setPassword(event.target.value)}\n                />\n                <Button\n                    type={\"primary\"}\n                    onClick={submit}\n                    loading={loading}\n                    style={{marginTop: 20}}\n                >\n                    Submit\n                </Button>\n            </Card>\n        </Layout>\n        </div>\n    );\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}